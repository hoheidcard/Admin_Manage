import{u as et,x as nt,d as at,e as lt,m as E,n as it,D as dt,r as c,o as l,c as u,a as t,w as i,v,b as d,p as P,j as f,F as I,z as M,f as g,g as p,t as a,q as y,i as r,E as z,h as L}from"./index-DwPljJjs.js";const rt={class:"faq-page"},ct={class:"container"},ut={class:"table-card card"},pt={class:"table-header"},_t={class:"left"},ht={class:"searchbar"},vt={class:"icon"},gt={class:"right"},mt={class:"searchbar"},yt={class:"select-dropdown"},Dt=L('<option value="null" disabled>Select Order Status</option><option value="CANCELLED">CANCELLED</option><option value="ORDERED">ORDERED</option><option value="DELIVERED">DELIVERED</option><option value="DISPATCH">DISPATCH</option>',5),bt=[Dt],ft={class:"searchbar"},Ct={class:"select-dropdown"},St=L('<option value="null" disabled>Select Payment Status</option><option value="ALL">ALL</option><option value="PENDING">PENDING</option><option value="CANCELLED">CANCELLED</option><option value="REFUNDED">REFUNDED</option><option value="COMPLETED">COMPLETED</option>',6),wt=[St],kt={class:"searchbar"},Et={class:"select-dropdown"},Pt=L('<option value="null" disabled>Select Payment Mode</option><option value="All">ALL</option><option value="COD">COD</option><option value="Razor Pay">Razor Pay</option><option value="Phone Pe">Phone Pe</option>',5),It=[Pt],Mt=t("div",{class:"text"},"From",-1),Lt={class:"date-input"},Vt={class:"icon"},At=t("div",{class:"text"},"To",-1),Ot={class:"date-input"},xt={class:"icon"},Nt={class:"searchbar"},Rt={class:"table-body p-16"},Tt={class:"table-outer"},Ut={class:"table"},Yt=t("thead",null,[t("th",null,"Order Id"),t("th",null,"Order Date"),t("th",null,"Invoice Number"),t("th",null,"Total"),t("th",null,"Status"),t("th",null,"Payment Status"),t("th",null,"Payment Mode"),t("th",{class:"text-center"},"From"),t("th",{class:"text-center"},"Action")],-1),qt={style:{display:"flex",gap:"2px"}},Ht={class:"option-btns"},Gt=["onClick"],zt=t("div",{class:"tooltip"},"Order Detail",-1),Ft=["onClick"],$t=t("div",{class:"tooltip"},"Download Invoice",-1),Bt=["onClick"],Kt=t("div",{class:"tooltip"},"Status Change",-1),jt={key:0,class:"table-no-data"},Qt=t("div",null,"No records Found!",-1),Zt=[Qt],Jt={key:1,class:"table-footer"},Wt=t("div",{class:"title",showHeader:"true"},"Order Details",-1),Xt={key:0,class:"row"},ts={class:"data-list"},ss={class:"data"},os={class:"title"},es=t("b",null,"Order Id :",-1),ns={class:"data"},as={class:"title"},ls=t("b",null,"Order Date :",-1),is={class:"data"},ds={class:"title"},rs=t("b",null,"Invoice Number :",-1),cs={class:"data"},us={class:"title"},ps=t("b",null,"Price :",-1),_s={class:"data"},hs={class:"title"},vs=t("b",null,"Delivery Address :",-1),gs={class:"data"},ms={class:"title"},ys=t("b",null,"Order Status :",-1),Ds={class:"table-body"},bs={class:"table-outer"},fs={class:"table"},Cs=t("thead",null,[t("th",null,"Image"),t("th",null,"Product"),t("th",null,"Variants"),t("th",null,"Category"),t("th",null,"Quantity"),t("th",{class:"text-center"},"Status")],-1),Ss=["src"],ws={key:1},ks=t("div",{class:"title",showHeader:"true"},"Change Status",-1),Es={class:"row"},Ps={class:"form-item mb-16"},Is=t("div",{class:"title"},"CGST",-1),Ms={class:"form-item mb-16"},Ls=t("div",{class:"title"},"SGST",-1),Vs={class:"form-item mb-16"},As=t("div",{class:"title"},"IGST",-1),Os={class:"form-item mb-16"},xs=t("div",{class:"title"},"Shipping",-1),Ns={class:"form-item mb-16"},Rs=t("div",{class:"title"},"Additional Discount",-1),Ts={class:"status-row"},Us={for:"approve",class:"data"},Ys={class:"data-inner approve-card"},qs=t("div",{class:"title"},"DISPATCH",-1),Hs={for:"pending",class:"data"},Gs={class:"data-inner pending-card"},zs=t("div",{class:"title"},"DELIVERED",-1),Fs={class:"modal-footer"},$s={class:"btns"},js={__name:"Carts",setup(Bs){const C=et();nt();const _=at(()=>C.state.Carts),o=lt({submit:!1,limit:10,offset:0,keyword:"",status:"ORDERED",paymentStatus:"ALL",paymentMode:"All",filterType:"ORDER DATE",changeStatus:null,currentPage:1,fromDate:E().subtract(30,"days").format("YYYY-MM-DD"),toDate:E().format("YYYY-MM-DD"),typingTimer:null,typingDelay:500,detailsModal:!1,orderDetails:null,sgst:0,cgst:0,igst:0,shipping:0,addDiscount:0});it(()=>{S()}),dt(()=>o.keyword,()=>{clearTimeout(o.typingTimer),o.typingTimer=setTimeout(()=>{o.limit=10,o.offset=0,o.currentPage=1,S()},o.typingDelay)});function S(){C.dispatch("Carts/all",{limit:o.limit,offset:o.offset,keyword:o.keyword,status:o.status,paymentStatus:o.paymentStatus,paymentMode:o.paymentMode,fromDate:o.fromDate,toDate:o.toDate})}function F(n,e){o.changeStatus=e,o.id=n,_.value.statusModal=!0}function $(n){o.detailsModal=!0,o.orderDetails=n}function B(){o.id&&o.changeStatus&&C.dispatch("Carts/status",{id:o.id,status:o.changeStatus,sgst:o.sgst,cgst:o.cgst,igst:o.igst,shipping:o.shipping,addDiscount:o.addDiscount})}function K(n){C.dispatch("Carts/downloadInvoice",{id:n})}const j=n=>{o.currentPage=n,o.offset=o.limit*(n-1),S()};function V(n){return n?E(n).format("MMM Do YYYY"):"-"}function D(n){let e=String.fromCharCode(n.keyCode);if(/^[0-9]+$/.test(e)||n.keyCode===8||n.keyCode===9||n.keyCode===37||n.keyCode===39||n.keyCode>=96&&n.keyCode<=105)return!0;n.preventDefault()}return(n,e)=>{var N,R;const Q=c("icon-search"),A=c("icon-calendar"),m=c("router-link"),Z=c("icon-eye"),J=c("icon-down-arrow-round"),W=c("icon-setting"),X=c("Pagination"),O=c("icon-cross"),x=c("Modal"),tt=c("icon-success"),st=c("icon-warning");return l(),u("section",rt,[t("div",ct,[t("div",ut,[t("div",pt,[t("div",_t,[t("div",ht,[i(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>o.keyword=s),placeholder:"Search here"},null,512),[[v,o.keyword]]),t("div",vt,[d(Q)])])]),t("div",gt,[t("div",mt,[t("div",yt,[i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.status=s)},bt,512),[[P,o.status]])])]),t("div",ft,[t("div",Ct,[i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.paymentStatus=s)},wt,512),[[P,o.paymentStatus]])])]),t("div",kt,[t("div",Et,[i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.paymentMode=s)},It,512),[[P,o.paymentMode]])])]),Mt,t("div",Lt,[i(t("input",{type:"date",class:"w-12-r-i","onUpdate:modelValue":e[4]||(e[4]=s=>o.fromDate=s)},null,512),[[v,o.fromDate]]),t("div",Vt,[d(A)])]),At,t("div",Ot,[i(t("input",{type:"date",class:"w-12-r-i","onUpdate:modelValue":e[5]||(e[5]=s=>o.toDate=s)},null,512),[[v,o.toDate]]),t("div",xt,[d(A)])]),t("div",Nt,[t("button",{class:"btn white-btn w-full",type:"button",onClick:f(S,["prevent"])}," Submit ")])])]),t("div",Rt,[t("div",Tt,[t("table",Ut,[Yt,t("tbody",null,[(l(!0),u(I,null,M(_.value.data,(s,w)=>{var b,h;return l(),u("tr",{key:w},[t("td",null,a(s.orderId),1),t("td",null,a(V(s.orderDate)),1),t("td",null,a(s.invoiceNumber),1),t("td",null,a(s.total),1),t("td",null,a(s.status),1),t("td",null,a((b=s.paymentHistory)==null?void 0:b.status),1),t("td",null,a((h=s.paymentHistory)==null?void 0:h.mode),1),t("td",qt,[s.partnerAccount?(l(),y(m,{key:0,to:{path:"/crm/partners/setting/department",query:{id:s.partnerAccount.partnerDetail[0].id,settingId:s.partnerAccount.settingId}},class:"btn primary-btn"},{default:p(()=>[r(" Partner ")]),_:2},1032,["to"])):g("",!0),s.subPartnerAccount?(l(),y(m,{key:1,to:{path:"/crm/partners/setting/department",query:{id:s.subPartnerAccount.partnerDetail[0].id,settingId:s.subPartnerAccount.settingId}},class:"btn primary-btn"},{default:p(()=>[r(" Sub Partner ")]),_:2},1032,["to"])):g("",!0),s.account&&s.roles==="SCHOOL"?(l(),y(m,{key:2,to:{path:"/crm/school/setting/class-list",query:{id:s.account.organizationDetail[0].id,settingId:s.account.settingId}},class:"btn primary-btn"},{default:p(()=>[r(" SCHOOL ")]),_:2},1032,["to"])):g("",!0),s.account&&s.roles==="USER"?(l(),y(m,{key:3,to:{path:"/crm/user-detail",query:{id:s.account.id}},class:"btn primary-btn"},{default:p(()=>[r(" USER ")]),_:2},1032,["to"])):g("",!0),s.account&&s.roles==="COLLEGE"?(l(),y(m,{key:4,to:{path:"/crm/college/setting/class-list",query:{id:s.account.organizationDetail[0].id,settingId:s.account.settingId}},class:"btn primary-btn"},{default:p(()=>[r(" COLLGE ")]),_:2},1032,["to"])):g("",!0),s.account&&s.roles==="ORGANIZATION"?(l(),y(m,{key:5,to:{path:"/crm/organization/setting/designation",query:{id:s.account.organizationDetail[0].id,settingId:s.account.settingId}},class:"btn primary-btn"},{default:p(()=>[r(" CORP ")]),_:2},1032,["to"])):g("",!0)]),t("td",null,[t("div",Ht,[t("div",{class:"icon tooltip-wrapper",onClick:k=>$(s)},[d(Z),zt],8,Gt),t("a",{class:"icon tooltip-wrapper",onClick:k=>K(s.id)},[d(J),$t],8,Ft),t("div",{class:"icon tooltip-wrapper",onClick:f(k=>F(s.id,s.status),["prevent"])},[d(W),Kt],8,Bt)])])])}),128))])])]),((N=_.value.data)==null?void 0:N.length)<=0?(l(),u("div",jt,Zt)):g("",!0),((R=_.value.data)==null?void 0:R.length)>0?(l(),u("div",Jt,[d(X,{currentPage:o.currentPage,totalItem:_.value.total,itemsPerPage:o.limit,"onUpdate:currentPage":e[6]||(e[6]=s=>j(s))},null,8,["currentPage","totalItem","itemsPerPage"])])):g("",!0)])])]),d(x,{show:o.detailsModal,"onUpdate:show":e[8]||(e[8]=s=>o.detailsModal=s),class:"faq-modal",type:"lg",headerClasses:"header-bg"},{header:p(()=>[Wt,t("div",{class:"close-btn",onClick:e[7]||(e[7]=f(s=>o.detailsModal=!1,["prevent"]))},[d(O)])]),default:p(()=>{var s,w,b;return[o.orderDetails?(l(),u("div",Xt,[t("div",ts,[t("div",ss,[t("div",os,[es,r(a(o.orderDetails.id),1)])]),t("div",ns,[t("div",as,[ls,r(a(V(o.orderDetails.orderDate)),1)])]),t("div",is,[t("div",ds,[rs,r("Order-"+a(o.orderDetails.invoiceNumber),1)])]),t("div",cs,[t("div",us,[ps,r(a(o.orderDetails.total),1)])]),t("div",_s,[t("div",hs,[vs,r(a((w=(s=o.orderDetails)==null?void 0:s.userAddress)==null?void 0:w.address),1)])]),t("div",gs,[t("div",ms,[ys,r(a(o.orderDetails.status),1)])]),t("div",Ds,[t("div",bs,[t("table",fs,[Cs,t("tbody",null,[(l(!0),u(I,null,M((b=o.orderDetails)==null?void 0:b.cartProduct,(h,k)=>{var T,U,Y,q,H;return l(),u("tr",{key:k},[t("td",null,[t("img",{src:(U=(T=h.idCardsStock)==null?void 0:T.productImage[0])==null?void 0:U.file,style:{width:"50px",height:"auto"},alt:""},null,8,Ss)]),t("td",null,a((Y=h.idCardsStock)==null?void 0:Y.title),1),t("td",null,[(l(!0),u(I,null,M(h.cartProductVariant,(G,ot)=>(l(),u("li",{key:ot},[t("b",null,a(G.productVariant.type)+":",1),r(" "+a(G.productVariant.name),1)]))),128))]),t("td",null,a((H=(q=h.idCardsStock)==null?void 0:q.category)==null?void 0:H.title),1),t("td",null,a(h.quantity),1),t("td",null,a(h.status),1)])}),128))])])])])])])):(l(),u("div",ws,"No data available. Please select order!"))]}),_:1},8,["show"]),d(x,{show:_.value.statusModal,"onUpdate:show":e[23]||(e[23]=s=>_.value.statusModal=s),class:"status-modal",headerClasses:"header-bg"},{header:p(()=>[ks,t("div",{class:"close-btn",onClick:e[9]||(e[9]=f(s=>_.value.statusModal=!1,["prevent"]))},[d(O)])]),default:p(()=>[t("div",Es,[t("div",Ps,[Is,i(t("input",{type:"text",name:"otp","onUpdate:modelValue":e[10]||(e[10]=s=>o.cgst=s),maxlength:"2",onKeydown:e[11]||(e[11]=s=>D(s))},null,544),[[v,o.cgst]])]),t("div",Ms,[Ls,i(t("input",{type:"text",name:"otp","onUpdate:modelValue":e[12]||(e[12]=s=>o.sgst=s),maxlength:"2",onKeydown:e[13]||(e[13]=s=>D(s))},null,544),[[v,o.sgst]])]),t("div",Vs,[As,i(t("input",{type:"text",name:"otp","onUpdate:modelValue":e[14]||(e[14]=s=>o.igst=s),maxlength:"2",onKeydown:e[15]||(e[15]=s=>D(s))},null,544),[[v,o.igst]])]),t("div",Os,[xs,i(t("input",{type:"text",name:"otp","onUpdate:modelValue":e[16]||(e[16]=s=>o.shipping=s),maxlength:"2",onKeydown:e[17]||(e[17]=s=>D(s))},null,544),[[v,o.shipping]])]),t("div",Ns,[Rs,i(t("input",{type:"text",name:"otp","onUpdate:modelValue":e[18]||(e[18]=s=>o.addDiscount=s),maxlength:"2",onKeydown:e[19]||(e[19]=s=>D(s))},null,544),[[v,o.addDiscount]])])]),t("div",Ts,[t("label",Us,[i(t("input",{type:"radio","onUpdate:modelValue":e[20]||(e[20]=s=>o.changeStatus=s),value:"DISPATCH",id:"approve",name:"status"},null,512),[[z,o.changeStatus]]),t("div",Ys,[d(tt),qs])]),t("label",Hs,[i(t("input",{type:"radio","onUpdate:modelValue":e[21]||(e[21]=s=>o.changeStatus=s),value:"DELIVERED",id:"pending",name:"status"},null,512),[[z,o.changeStatus]]),t("div",Gs,[d(st),zs])])]),t("div",Fs,[t("div",$s,[t("div",{class:"btn red-btn",onClick:e[22]||(e[22]=f(s=>_.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:B},"Submit")])])]),_:1},8,["show"])])}}};export{js as default};
