import{u as St,s as Ct,x as kt,d as p,e as Dt,n as wt,D as Vt,r as c,o as i,c as l,a as t,b as a,w as _,v as m,p as R,g as h,j as f,F as Pt,z as Et,f as r,t as u,y as At,m as Y,E as x}from"./index-DwPljJjs.js";const Mt={class:"faq-page"},Nt={class:"container"},zt={class:"table-card card"},xt={class:"table-header"},Ot={class:"left"},Tt={class:"title-row"},Ut={class:"icon"},qt=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Staff : List"),t("h5",{class:"main-title"},"Staff List")],-1),$t={class:"right"},Lt={class:"searchbar"},Bt={class:"icon"},Gt={class:"searchbar"},Rt={class:"select-dropdown"},Yt=t("option",{value:"ACTIVE"},"ACTIVE",-1),Ft=t("option",{value:"PENDING"},"PENDING",-1),Ht=t("option",{value:"DEACTIVE"},"DEACTIVE",-1),Kt=[Yt,Ft,Ht],jt={class:"icons"},Qt=t("div",{class:"tooltip"},"Import List",-1),Zt={class:"icons"},Jt=t("div",{class:"tooltip"},"Card/Order",-1),Wt={class:"icons"},Xt=t("div",{class:"tooltip"},"Add Staff",-1),te={class:"table-body p-16"},ee={class:"table-outer"},se={class:"table"},oe=t("thead",null,[t("th"),t("th",null,"Card"),t("th",null,"Image"),t("th",null,"Name"),t("th",null,"Phone"),t("th",null,"Dob"),t("th",null,"Designation"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1),ne=["onChange"],ae={key:0},ie={key:1},le={key:2},de={key:3},re={key:0,class:"zoom-image"},ce=["src"],ue={key:0,class:"badge success-badge"},_e={key:1,class:"badge warning-badge"},ve={key:2,class:"badge danger-badge"},pe={class:"option-btns"},fe=["onClick"],me=t("div",{class:"tooltip"},"Edit",-1),he=t("div",{class:"tooltip"},"Staff",-1),ge=["onClick"],ye=t("div",{class:"tooltip"},"Permission",-1),be=["onClick"],Ie=t("div",{class:"tooltip"},"Change Status",-1),Se=["onClick"],Ce=t("div",{class:"tooltip"},"Profile",-1),ke={key:0,class:"table-no-data"},De=t("div",null,"No records Found!",-1),we=[De],Ve={key:1,class:"table-footer"},Pe=t("div",{class:"title",showHeader:"true"},"Generate Order",-1),Ee=t("h4",{style:{"text-align":"center"}},"OR",-1),Ae={class:"form mb-16"},Me={class:"form-item mb-16 col-10"},Ne=t("div",{class:"title"},"Delivery Date",-1),ze=["min"],xe={key:0,class:"err-msg"},Oe={class:"form-item mb-16 col-10"},Te=t("div",{class:"title"},"Approx Quantity",-1),Ue={key:0,class:"err-msg"},qe={class:"form-item mb-16 col-10"},$e=t("div",{class:"title"},"Delivery Contact No",-1),Le={key:0,class:"err-msg"},Be={class:"form-item mb-16 col-10"},Ge=t("div",{class:"title"},"Delivery Address",-1),Re={key:0,class:"err-msg"},Ye={class:"form-item mb-16 col-10"},Fe=t("div",{class:"title"},"Delivery Partner",-1),He={class:"modal-footer"},Ke={class:"btns"},je={class:"title",showHeader:"true"},Qe={class:"form mb-16"},Ze={class:"form-item mb-16"},Je=t("div",{class:"title"},"Name",-1),We={key:0,class:"err-msg"},Xe={class:"form-item mb-16"},ts=t("div",{class:"title"},"Office Email",-1),es={key:0,class:"err-msg"},ss={class:"row"},os={class:"form-item mb-16 col-5"},ns=t("div",{class:"title"},"Gender",-1),as={class:"select-dropdown"},is=t("option",{value:"MALE"},"MALE",-1),ls=t("option",{value:"FEMALE"},"FEMALE",-1),ds=t("option",{value:"OTHER"},"OTHER",-1),rs=[is,ls,ds],cs={key:0,class:"err-msg"},us={class:"form-item mb-16 col-5"},_s=t("div",{class:"title"},"Dob",-1),vs=["max"],ps={key:0,class:"err-msg"},fs={class:"form-item mb-16"},ms=t("div",{class:"title"},"Designation",-1),hs={key:0,class:"err-msg"},gs={class:"modal-footer"},ys={class:"btns"},bs=t("div",{class:"title",showHeader:"true"},"Change Status",-1),Is={class:"status-row"},Ss={for:"approve",class:"data"},Cs={class:"data-inner approve-card"},ks=t("div",{class:"title"},"ACTIVE",-1),Ds={for:"pending",class:"data"},ws={class:"data-inner pending-card"},Vs=t("div",{class:"title"},"PENDING",-1),Ps={for:"block",class:"data"},Es={class:"data-inner block-card"},As=t("div",{class:"title"},"DEACTIVE",-1),Ms={class:"modal-footer"},Ns={class:"btns"},Os={__name:"MyStaffList",setup(zs){const v=St(),g=Ct(),O=kt(),d=p(()=>v.state.OrganizationStaff),F=p(()=>v.state.Designation),H=p(()=>v.state.DeliveryPartner),e=Dt({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"COLLEGE",staffType:"ORGANIZATION",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,organizationAccountId:null,organizationSettingId:null,changeStatus:null,accountId:null,staffId:null,staffAccountId:null,name:null,emailId:null,phoneNumber:null,password:null,gender:"MALE",dob:null,designation:"",designationId:null,searchKey:null,deliveryDate:null,parentCard:!1,qty:0,deliveryAddress:null,contactNumber:null,deliveryPartnerId:null,ids:[],idCardStockId:null});wt(()=>{g.query.id&&(e.organizationId=g.query.id,e.organizationSettingId=g.query.settingId,e.accountId=g.query.accountId,b(),v.dispatch("DeliveryPartner/getDeliveryPartners"))}),Vt(()=>e.keyword,()=>{clearTimeout(e.typingTimer),e.typingTimer=setTimeout(()=>{e.limit=10,e.offset=0,e.currentPage=1,b()},e.typingDelay)});function K(n){const o=e.ids.findIndex(y=>y===n);o<0?e.ids.push(n):e.ids.splice(o,1)}const j=()=>{if(e.ids.length>0){if(P.value||V.value||A.value||E.value){e.submit=!0;return}e.submit=!1,v.dispatch("OrganizationSettings/createStaffOrder",{staff:e.ids,deliveryDate:e.deliveryDate,deliveryAddress:e.deliveryAddress,contactNumber:e.contactNumber,qty:e.qty,deliveryPartnerId:e.deliveryPartnerId,settingId:e.organizationSettingId})}else v.dispatch("Alert/error",{msg:"Please seclect staff!"})};function b(){v.dispatch("OrganizationStaff/getBranchStaff",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status,type:e.staffType,organizationDetailId:e.organizationId})}function Q(){v.dispatch("Designation/getMyDesignationBySetting",{settingId:g.query.settingId})}function Z(n,o){e.changeStatus=o,e.organizationAccountId=n,d.value.statusModal=!0}function J(n){var o;d.value.branchStaffModal=!0,e.editMode=!0,e.staffId=n.id,e.staffAccountId=n.accountId,e.name=n.name,e.emailId=n.emailId,e.dob=n.dob,e.gender=n.gender,e.designationId=n.designationId,e.designation=(o=n.designation)==null?void 0:o.name,Q()}function W(){v.dispatch("OrganizationStaff/updateBranchStaffStatus",{id:e.organizationAccountId,status:e.changeStatus})}const X=n=>{e.currentPage=n,e.offset=e.limit*(n-1),b()};function tt(){b()}const et=n=>{e.designationId=n.id},st=n=>{e.searchKey=n};function ot(n){return n?Y(n).format("DD.MM.YYYY"):"-"}function nt(n,o){O.push({path:o,query:{id:n}})}function T(n,o,y,M){O.push({path:y,query:{id:n,settingId:o,accountId:M}})}function at(){if(S.value||C.value||k.value||D.value||w.value){e.submit=!0;return}e.submit=!1,v.dispatch("OrganizationStaff/updateStaff",{id:e.staffAccountId,name:e.name,emailId:e.emailId,dob:e.dob,gender:e.gender,designationId:e.designationId,designationName:e.designation})}const it=()=>{v.dispatch("CardOrder/downloadStaffCSVByOrganizationId",{id:e.organizationSettingId})},lt=()=>{v.dispatch("CardOrder/downloadStaffFileByOrganizationId",{id:e.organizationSettingId})},S=p(()=>{if(!e.name)return"Please Enter Name"}),C=p(()=>{let n=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(e.emailId){if(!n.test(e.emailId))return"Please Enter Valid Email!"}else return"Please Enter Email!"}),k=p(()=>{if(!e.designationId)return"Please Select Designation"}),D=p(()=>{if(!e.gender)return"Please Select Gender"}),w=p(()=>{if(!e.dob)return"Please Select Date of Birth"}),V=p(()=>{if(!e.deliveryDate)return"Please select delivery date"}),P=p(()=>{if(!e.deliveryAddress)return"Please enter delivery address"}),E=p(()=>{if(!e.contactNumber)return"Please enter contact no"}),A=p(()=>{if(e.qty<=0)return"Please enter approx quantity"});function dt(n){let o=String.fromCharCode(n.keyCode);if(/^[0-9]+$/.test(o)||n.keyCode===8||n.keyCode===9||n.keyCode===37||n.keyCode===39||n.keyCode>=96&&n.keyCode<=105)return!0;n.preventDefault()}return(n,o)=>{var $,L;const y=c("icon-help"),M=c("icon-search"),rt=c("icon-download"),U=c("router-link"),q=c("icon-card"),ct=c("icon-plus"),ut=c("icon-edit"),_t=c("icon-permission"),vt=c("icon-status"),pt=c("icon-profile"),ft=c("Pagination"),N=c("icon-cross"),mt=c("single-select-id"),z=c("Modal"),ht=c("SingleSelect"),gt=c("icon-success"),yt=c("icon-warning"),bt=c("icon-block");return i(),l("section",Mt,[t("div",Nt,[t("div",zt,[t("div",xt,[t("div",Ot,[t("div",Tt,[t("div",Ut,[a(y)]),qt])]),t("div",$t,[t("div",Lt,[_(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>e.keyword=s),placeholder:"Search here"},null,512),[[m,e.keyword]]),t("div",Bt,[a(M)])]),t("div",Gt,[t("div",Rt,[_(t("select",{name:"",id:"","onUpdate:modelValue":o[1]||(o[1]=s=>e.status=s),onChange:tt},Kt,544),[[R,e.status]])])]),t("div",jt,[a(U,{to:"/crm/college/import-staff?id="+e.organizationId+"&settingId="+e.organizationSettingId,class:"icon tooltip-wrapper"},{default:h(()=>[a(rt,{class:""}),Qt]),_:1},8,["to"])]),t("div",Zt,[t("div",{class:"icon tooltip-wrapper",onClick:o[2]||(o[2]=f(s=>d.value.orderModal=!0,["prevent"]))},[a(q),Jt])]),t("div",Wt,[t("div",{class:"icon tooltip-wrapper",onClick:o[3]||(o[3]=f(s=>T(e.organizationId,e.organizationSettingId,"/crm/college/add-staff",e.accountId),["prevent"]))},[a(ct),Xt])])])]),t("div",te,[t("div",ee,[t("table",se,[oe,t("tbody",null,[(i(!0),l(Pt,null,Et(d.value.branchStaffData,(s,It)=>{var B,G;return i(),l("tr",{key:It},[t("td",null,[t("input",{type:"checkbox",onChange:I=>K(s.id)},null,40,ne)]),t("td",null,[s.card==0?(i(),l("span",ae,"Remaining")):r("",!0),s.card==1?(i(),l("span",ie,"In Process")):r("",!0),s.card==2?(i(),l("span",le,"Printed")):r("",!0),s.card==3?(i(),l("span",de,"RePrinted")):r("",!0)]),t("td",null,[s.profile?(i(),l("div",re,[t("img",{src:`${s.profile}?width=200`,alt:""},null,8,ce)])):r("",!0)]),t("td",null,u(s.name),1),t("td",null,u((B=s.account)==null?void 0:B.phoneNumber),1),t("td",null,u(ot(s.dob)),1),t("td",null,u((G=s.designation)==null?void 0:G.name),1),t("td",null,[s.status==="ACTIVE"?(i(),l("div",ue,u(s.status),1)):r("",!0),s.status==="PENDING"?(i(),l("div",_e,u(s.status),1)):r("",!0),s.status==="DEACTIVE"?(i(),l("div",ve,u(s.status),1)):r("",!0)]),t("td",null,[t("div",pe,[t("div",{class:"icon tooltip-wrapper",onClick:I=>J(s)},[a(ut),me],8,fe),a(U,{class:"icon tooltip-wrapper",to:{path:"/crm/college/final-staff-card",query:{id:s.id,status:"Designation"}}},{default:h(()=>[a(q),he]),_:2},1032,["to"]),t("div",{class:"icon tooltip-wrapper",onClick:f(I=>nt(s.accountId,"/crm/staff-permission"),["prevent"])},[a(_t),ye],8,ge),t("div",{class:"icon tooltip-wrapper",onClick:f(I=>Z(s.accountId,s.status),["prevent"])},[a(vt),Ie],8,be),t("div",{class:"icon tooltip-wrapper",onClick:f(I=>T(s.accountId,e.organizationSettingId,"/crm/college-staff-profile-layout"),["prevent"])},[a(pt),Ce],8,Se)])])])}),128))])])]),(($=d.value.branchStaffData)==null?void 0:$.length)<=0?(i(),l("div",ke,we)):r("",!0),((L=d.value.branchStaffData)==null?void 0:L.length)>0?(i(),l("div",Ve,[a(ft,{currentPage:e.currentPage,totalItem:d.value.totalBranchStaff,itemsPerPage:e.limit,"onUpdate:currentPage":o[4]||(o[4]=s=>X(s))},null,8,["currentPage","totalItem","itemsPerPage"])])):r("",!0)])])]),a(z,{show:d.value.orderModal,"onUpdate:show":o[13]||(o[13]=s=>d.value.orderModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:h(()=>[Pe,t("div",{class:"close-btn",onClick:o[5]||(o[5]=f(s=>d.value.orderModal=!1,["prevent"]))},[a(N)])]),default:h(()=>[t("div",{class:"modal-footer"},[t("div",{class:"btns"},[t("div",{class:"btn white-btn",onClick:it},"Down. CSV"),t("div",{class:"btn white-btn",onClick:lt},"Dwon. Photo")])]),Ee,t("form",Ae,[t("div",Me,[Ne,_(t("input",{type:"date","onUpdate:modelValue":o[6]||(o[6]=s=>e.deliveryDate=s),placeholder:"Delivery Date",min:e.todayDate},null,8,ze),[[m,e.deliveryDate]]),e.submit&&V.value?(i(),l("div",xe,u(V.value),1)):r("",!0)]),t("div",Oe,[Te,_(t("input",{type:"number","onUpdate:modelValue":o[7]||(o[7]=s=>e.qty=s),placeholder:"Approx Quantity"},null,512),[[m,e.qty]]),e.submit&&A.value?(i(),l("div",Ue,u(A.value),1)):r("",!0)]),t("div",qe,[$e,_(t("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=s=>e.contactNumber=s),placeholder:"Delivery Contact Number",onKeydown:o[9]||(o[9]=s=>dt(s)),maxlength:"10"},null,544),[[m,e.contactNumber]]),e.submit&&E.value?(i(),l("div",Le,u(E.value),1)):r("",!0)]),t("div",Be,[Ge,_(t("textarea",{type:"text","onUpdate:modelValue":o[10]||(o[10]=s=>e.deliveryAddress=s),placeholder:"Delivery Address",maxlength:"200",rows:"4"},null,512),[[m,e.deliveryAddress]]),e.submit&&P.value?(i(),l("div",Re,u(P.value),1)):r("",!0)]),t("div",Ye,[Fe,a(mt,{modelValue:e.deliveryPartnerId,"onUpdate:modelValue":o[11]||(o[11]=s=>e.deliveryPartnerId=s),options:H.value.data},null,8,["modelValue","options"])])]),t("div",He,[t("div",Ke,[t("div",{class:"btn red-btn",onClick:o[12]||(o[12]=f(s=>d.value.orderModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:j},"Create Order")])])]),_:1},8,["show"]),a(z,{show:d.value.branchStaffModal,"onUpdate:show":o[21]||(o[21]=s=>d.value.branchStaffModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:h(()=>[t("div",je,u(e.editMode?"Update Staff":"Add Staff"),1),t("div",{class:"close-btn",onClick:o[14]||(o[14]=f(s=>d.value.branchStaffModal=!1,["prevent"]))},[a(N)])]),default:h(()=>[t("form",Qe,[t("div",Ze,[Je,_(t("input",{type:"text","onUpdate:modelValue":o[15]||(o[15]=s=>e.name=s),placeholder:"Enter Name",maxlength:"30"},null,512),[[m,e.name]]),e.submit&&S.value?(i(),l("div",We,u(S.value),1)):r("",!0)]),t("div",Xe,[ts,_(t("input",{type:"text","onUpdate:modelValue":o[16]||(o[16]=s=>e.emailId=s),placeholder:"Enter E-mail ",maxlength:"30"},null,512),[[m,e.emailId]]),e.submit&&C.value?(i(),l("div",es,u(C.value),1)):r("",!0)]),t("div",ss,[t("div",os,[ns,t("div",as,[_(t("select",{name:"",id:"","onUpdate:modelValue":o[17]||(o[17]=s=>e.gender=s)},rs,512),[[R,e.gender]])]),e.submit&&D.value?(i(),l("div",cs,u(D.value),1)):r("",!0)]),t("div",us,[_s,_(t("input",{type:"date","onUpdate:modelValue":o[18]||(o[18]=s=>e.dob=s),max:At(Y)().format("YYYY-MM-DD")},null,8,vs),[[m,e.dob]]),e.submit&&w.value?(i(),l("div",ps,u(w.value),1)):r("",!0)])]),t("div",fs,[ms,a(ht,{options:F.value.designationData,onSelected:et,modelValue:e.designation,"onUpdate:modelValue":o[19]||(o[19]=s=>e.designation=s),next:!1,placeholder:"Select Designation",onSearch:st},null,8,["options","modelValue"]),e.submit&&k.value?(i(),l("div",hs,u(k.value),1)):r("",!0)])]),t("div",gs,[t("div",ys,[t("div",{class:"btn red-btn",onClick:o[20]||(o[20]=f(s=>d.value.branchStaffModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:at},"Submit")])])]),_:1},8,["show"]),a(z,{show:d.value.statusModal,"onUpdate:show":o[27]||(o[27]=s=>d.value.statusModal=s),class:"status-modal",headerClasses:"header-bg"},{header:h(()=>[bs,t("div",{class:"close-btn",onClick:o[22]||(o[22]=f(s=>d.value.statusModal=!1,["prevent"]))},[a(N)])]),default:h(()=>[t("div",Is,[t("label",Ss,[_(t("input",{type:"radio","onUpdate:modelValue":o[23]||(o[23]=s=>e.changeStatus=s),value:"ACTIVE",id:"approve",name:"status"},null,512),[[x,e.changeStatus]]),t("div",Cs,[a(gt),ks])]),t("label",Ds,[_(t("input",{type:"radio","onUpdate:modelValue":o[24]||(o[24]=s=>e.changeStatus=s),value:"PENDING",id:"pending",name:"status"},null,512),[[x,e.changeStatus]]),t("div",ws,[a(yt),Vs])]),t("label",Ps,[_(t("input",{type:"radio","onUpdate:modelValue":o[25]||(o[25]=s=>e.changeStatus=s),value:"DEACTIVE",id:"block",name:"status"},null,512),[[x,e.changeStatus]]),t("div",Es,[a(bt),As])])]),t("div",Ms,[t("div",Ns,[t("div",{class:"btn red-btn",onClick:o[26]||(o[26]=f(s=>d.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:W},"Submit")])])]),_:1},8,["show"])])}}};export{Os as default};
