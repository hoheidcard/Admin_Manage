import{u as rt,s as ct,x as ut,d as _,e as _t,n as vt,D as pt,r as u,o as l,c as i,a as e,b as r,w as v,v as f,p as gt,j as g,F as mt,z as ht,f as c,g as y,t as n,E as L}from"./index-DwPljJjs.js";import{_ as bt}from"./no-image-Cge9pZ0v.js";import{_ as ft}from"./img-D4b0CCTT.js";const yt={class:"faq-page"},kt={class:"container"},Ct={class:"table-card card"},It={class:"table-header"},wt={class:"left"},St={class:"title-row"},Vt={class:"icon"},Dt=e("div",{class:"titles"},[e("div",{class:"sub-title"},"Book : List"),e("h5",{class:"main-title"},"Book")],-1),Pt={class:"right"},Et={class:"searchbar"},Mt={class:"icon"},Ut={class:"searchbar"},Bt={class:"select-dropdown"},Lt=e("option",{value:"ACTIVE"},"ACTIVE",-1),zt=e("option",{value:"PENDING"},"PENDING",-1),At=e("option",{value:"DEACTIVE"},"DEACTIVE",-1),Nt=[Lt,zt,At],qt={class:"icons"},Tt=e("div",{class:"tooltip"},"Add Books",-1),xt={class:"table-body p-16"},Ot={class:"table-outer"},$t={class:"table"},jt=e("thead",null,[e("th",null,"#"),e("th",null,"Image"),e("th",null,"Name"),e("th",null,"Auther"),e("th",null,"Code"),e("th",null,"Book Category"),e("th",null,"Class"),e("th",null,"Quantity"),e("th",null,"Status"),e("th",{class:"text-center"},"Action")],-1),Ft={class:"s-name flex align-center gap-10"},Gt=["src"],Rt={key:1,src:bt,class:"h-w-3r",alt:""},Ht={key:0,class:"badge success-badge"},Qt={key:1,class:"badge warning-badge"},Kt={key:2,class:"badge danger-badge"},Jt={class:"option-btns"},Wt=["onClick"],Xt=e("div",{class:"tooltip"},"Edit",-1),Yt=["onClick"],Zt=e("div",{class:"tooltip"},"Change Status",-1),te=["onClick"],ee=e("div",{class:"tooltip"},"Change Image",-1),oe={key:0,class:"table-no-data"},se=e("div",null,"No records Found!",-1),ae=[se],le={key:1,class:"table-footer"},ie={class:"title",showHeader:"true"},ne={class:"form mb-16"},de={class:"form-item mb-16"},re=e("div",{class:"title"},"Book Name",-1),ce={key:0,class:"err-msg"},ue={class:"form-item mb-16"},_e=e("div",{class:"title"},"Author",-1),ve={key:0,class:"err-msg"},pe={class:"row"},ge={class:"form-item mb-16 col-5"},me=e("div",{class:"title"},"Quantity",-1),he={key:0,class:"err-msg"},be={class:"form-item mb-16 col-5"},fe=e("div",{class:"title"},"Code",-1),ye={key:0,class:"err-msg"},ke={class:"row"},Ce={class:"form-item mb-16 col-5"},Ie=e("div",{class:"title"},"Book Category",-1),we={key:0,class:"err-msg"},Se={class:"form-item mb-16 col-5"},Ve=e("div",{class:"title"},"Class",-1),De={key:0,class:"err-msg"},Pe={key:0,class:"form-item mb-16"},Ee=e("div",{class:"title"},"Image",-1),Me={key:0,class:"err-msg"},Ue={class:"form-item mb-16"},Be=e("div",{class:"title"},"Short Description",-1),Le={key:0,class:"err-msg"},ze={class:"modal-footer"},Ae={class:"btns"},Ne=e("div",{class:"title",showHeader:"true"},"Update Image",-1),qe={class:"form mb-16"},Te={class:"upload-section"},xe={class:"pic-upload"},Oe=["src"],$e={key:1,src:ft,class:"dummy-img pic",alt:""},je={for:"imgUpload-doc",class:"upload-file-block"},Fe={key:0,class:"err-msg"},Ge={class:"modal-footer justify-center"},Re={class:"btns"},He=e("div",{class:"title",showHeader:"true"},"Change Status",-1),Qe={class:"status-row"},Ke={for:"approve",class:"data"},Je={class:"data-inner approve-card"},We=e("div",{class:"title"},"ACTIVE",-1),Xe={for:"pending",class:"data"},Ye={class:"data-inner pending-card"},Ze=e("div",{class:"title"},"PENDING",-1),to={for:"block",class:"data"},eo={class:"data-inner block-card"},oo=e("div",{class:"title"},"DEACTIVE",-1),so={class:"modal-footer"},ao={class:"btns"},co={__name:"MyBookList",setup(lo){const p=rt(),M=ct();ut();const d=_(()=>p.state.OrganizationLibrary),z=_(()=>p.state.OrganizationSettings),t=_t({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,bookId:null,organizationSettingId:null,changeStatus:null,imagePreview:null,imagelink:null,file:null,name:null,shortDesc:null,quantity:null,author:null,code:null,bookCategoryId:null,classListId:null,bookId:null,bookCategory:null,class:null});vt(()=>{M.query.id&&(t.organizationId=M.query.id,t.organizationSettingId=M.query.settingId,k())}),pt(()=>t.keyword,()=>{clearTimeout(t.typingTimer),t.typingTimer=setTimeout(()=>{t.limit=10,t.offset=0,t.currentPage=1,k()},t.typingDelay)});function A(){p.dispatch("OrganizationSettings/getOneOrganizationSettings",{id:t.organizationSettingId})}function k(){p.dispatch("OrganizationLibrary/getBooks",{limit:t.limit,offset:t.offset,keyword:t.keyword,status:t.status,organizationDetailId:t.organizationId})}function R(){d.value.libraryModal=!0,t.editMode=!1,A()}function H(a){var o,m,b,E;d.value.libraryModal=!0,t.editMode=!0,A(),t.bookId=a.id,t.name=a.name,t.shortDesc=a.shortDesc,t.quantity=a.quantity,t.author=a.author,t.code=a.code,t.bookCategoryId=(o=a.bookCategory)==null?void 0:o.id,t.classListId=(m=a.classList)==null?void 0:m.id,t.bookCategory=(b=a.bookCategory)==null?void 0:b.name,t.class=(E=a.classList)==null?void 0:E.name}function Q(a,o){d.value.fileUploadModal=!0,t.bookId=a,t.imagePreview=o}function K(a,o){t.changeStatus=o,t.bookId=a,d.value.statusModal=!0}function J(a){t.bookCategoryId=a.id}function W(a){t.classListId=a.id}async function N(a){if(a){const o=await a.target;if(o.files[0].type==="image/png"||o.files[0].type==="image/jpg"||o.files[0].type==="image/jpeg"){if(o.files){const m=new FileReader;m.onload=b=>{t.imagePreview=b.target.result},o.files[0]&&(m.readAsDataURL(o.files[0]),t.file=o.files[0])}}else t.imagePreview=null,p.dispatch("Alert/error",{msg:"Upload image in png, jpeg, jpg format."})}}function X(){if(h.value){t.submit=!0;return}t.submit=!1,p.dispatch("OrganizationLibrary/updateImage",{id:t.bookId,file:t.file})}function Y(){if(t.editMode){if(C.value||I.value||w.value||S.value||V.value||D.value||P.value){t.submit=!0;return}t.submit=!1,p.dispatch("OrganizationLibrary/editBooks",{name:t.name,shortDesc:t.shortDesc,quantity:t.quantity,author:t.author,code:t.code,bookCategoryId:t.bookCategoryId,classListId:t.classListId,organizationDetailId:t.organizationId,id:t.bookId,bookCategory:t.bookCategory,className:t.class})}else{if(C.value||I.value||w.value||S.value||V.value||D.value||P.value||h.value){t.submit=!0;return}t.submit=!1,p.dispatch("OrganizationLibrary/addBooks",{name:t.name,shortDesc:t.shortDesc,quantity:t.quantity,author:t.author,code:t.code,bookCategoryId:t.bookCategoryId,classListId:t.classListId,file:t.file,organizationDetailId:t.organizationId})}}function Z(){p.dispatch("OrganizationLibrary/updateBooksStatus",{id:t.bookId,status:t.changeStatus})}const tt=a=>{t.currentPage=a,t.offset=t.limit*(a-1),k()};function et(){k()}const C=_(()=>{if(!t.name)return"Please Enter Name"}),I=_(()=>{if(!t.author)return"Please Enter Author"}),w=_(()=>{if(!t.quantity)return"Please Enter Quantity"}),S=_(()=>{if(!t.code)return"Please Enter Code"}),V=_(()=>{if(!t.bookCategoryId)return"Please Enter Book Category"}),D=_(()=>{if(!t.classListId)return"Please Select Class"}),P=_(()=>{if(!t.shortDesc)return"Please Enter Short Description"}),h=_(()=>{if(!t.file)return"Please Select a File"}),q=a=>{let o=String.fromCharCode(a.keyCode);if(/^[0-9]+$/.test(o)||a.keyCode===8)return!0;a.preventDefault()};return(a,o)=>{var x,O;const m=u("icon-help"),b=u("icon-search"),E=u("icon-plus"),ot=u("icon-edit"),st=u("icon-status"),at=u("icon-image-edit"),lt=u("Pagination"),U=u("icon-cross"),T=u("Select"),B=u("Modal"),it=u("icon-success"),nt=u("icon-warning"),dt=u("icon-block");return l(),i("section",yt,[e("div",kt,[e("div",Ct,[e("div",It,[e("div",wt,[e("div",St,[e("div",Vt,[r(m)]),Dt])]),e("div",Pt,[e("div",Et,[v(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>t.keyword=s),placeholder:"Search here"},null,512),[[f,t.keyword]]),e("div",Mt,[r(b)])]),e("div",Ut,[e("div",Bt,[v(e("select",{name:"",id:"","onUpdate:modelValue":o[1]||(o[1]=s=>t.status=s),onChange:et},Nt,544),[[gt,t.status]])])]),e("div",qt,[e("div",{class:"icon tooltip-wrapper",onClick:o[2]||(o[2]=g(s=>R(),["prevent"]))},[r(E),Tt])])])]),e("div",xt,[e("div",Ot,[e("table",$t,[jt,e("tbody",null,[(l(!0),i(mt,null,ht(d.value.bookData,(s,$)=>{var j,F;return l(),i("tr",{key:$},[e("td",null,n($+1),1),e("td",null,[e("div",Ft,[s.image?(l(),i("img",{key:0,src:s.image,class:"h-w-3r",alt:""},null,8,Gt)):(l(),i("img",Rt))])]),e("td",null,n(s.name),1),e("td",null,n(s.author),1),e("td",null,n(s.code),1),e("td",null,n((j=s.bookCategory)==null?void 0:j.name),1),e("td",null,n((F=s.classList)==null?void 0:F.name),1),e("td",null,n(s.quantity),1),e("td",null,[s.status==="ACTIVE"?(l(),i("div",Ht,n(s.status),1)):c("",!0),s.status==="PENDING"?(l(),i("div",Qt,n(s.status),1)):c("",!0),s.status==="DEACTIVE"?(l(),i("div",Kt,n(s.status),1)):c("",!0)]),e("td",null,[e("div",Jt,[e("div",{class:"icon tooltip-wrapper",onClick:G=>H(s)},[r(ot),Xt],8,Wt),e("div",{class:"icon tooltip-wrapper",onClick:g(G=>K(s.id,s.status),["prevent"])},[r(st),Zt],8,Yt),e("div",{class:"icon tooltip-wrapper",onClick:g(G=>Q(s.id,s.image),["prevent"])},[r(at),ee],8,te)])])])}),128))])])]),((x=d.value.bookData)==null?void 0:x.length)<=0?(l(),i("div",oe,ae)):c("",!0),((O=d.value.bookData)==null?void 0:O.length)>0?(l(),i("div",le,[r(lt,{currentPage:t.currentPage,totalItem:d.value.totalBook,itemsPerPage:t.limit,"onUpdate:currentPage":o[3]||(o[3]=s=>tt(s))},null,8,["currentPage","totalItem","itemsPerPage"])])):c("",!0)])])]),r(B,{show:d.value.libraryModal,"onUpdate:show":o[16]||(o[16]=s=>d.value.libraryModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:y(()=>[e("div",ie,n(t.editMode?"Update Books":"Add Books"),1),e("div",{class:"close-btn",onClick:o[4]||(o[4]=g(s=>d.value.libraryModal=!1,["prevent"]))},[r(U)])]),default:y(()=>[e("form",ne,[e("div",de,[re,v(e("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=s=>t.name=s),placeholder:"Enter Book Name",maxlength:"30"},null,512),[[f,t.name]]),t.submit&&C.value?(l(),i("div",ce,n(C.value),1)):c("",!0)]),e("div",ue,[_e,v(e("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=s=>t.author=s),placeholder:"Enter Author Name",maxlength:"30"},null,512),[[f,t.author]]),t.submit&&I.value?(l(),i("div",ve,n(I.value),1)):c("",!0)]),e("div",pe,[e("div",ge,[me,v(e("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=s=>t.quantity=s),placeholder:"Enter quantity",onKeydown:o[8]||(o[8]=s=>q(s)),maxlength:"7"},null,544),[[f,t.quantity]]),t.submit&&w.value?(l(),i("div",he,n(w.value),1)):c("",!0)]),e("div",be,[fe,v(e("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=s=>t.code=s),placeholder:"Enter code",onKeydown:o[10]||(o[10]=s=>q(s)),maxlength:"7"},null,544),[[f,t.code]]),t.submit&&S.value?(l(),i("div",ye,n(S.value),1)):c("",!0)])]),e("div",ke,[e("div",Ce,[Ie,r(T,{modelValue:t.bookCategory,"onUpdate:modelValue":o[11]||(o[11]=s=>t.bookCategory=s),options:z.value.bookCategory,placeholder:t.bookCategory?t.bookCategory:"Select",onSelected:J},null,8,["modelValue","options","placeholder"]),t.submit&&V.value?(l(),i("div",we,n(V.value),1)):c("",!0)]),e("div",Se,[Ve,r(T,{modelValue:t.class,"onUpdate:modelValue":o[12]||(o[12]=s=>t.class=s),options:z.value.classList,placeholder:t.class?t.class:"Select",onSelected:W},null,8,["modelValue","options","placeholder"]),t.submit&&D.value?(l(),i("div",De,n(D.value),1)):c("",!0)])]),t.editMode?c("",!0):(l(),i("div",Pe,[Ee,e("input",{type:"file",onChange:o[13]||(o[13]=s=>N(s))},null,32),t.submit&&h.value?(l(),i("div",Me,n(h.value),1)):c("",!0)])),e("div",Ue,[Be,v(e("textarea",{name:"",id:"","onUpdate:modelValue":o[14]||(o[14]=s=>t.shortDesc=s),rows:"4",placeholder:"Short Description"},null,512),[[f,t.shortDesc]]),t.submit&&P.value?(l(),i("div",Le,n(P.value),1)):c("",!0)])]),e("div",ze,[e("div",Ae,[e("div",{class:"btn red-btn",onClick:o[15]||(o[15]=g(s=>d.value.libraryModal=!1,["prevent"]))}," Cancel "),e("div",{class:"btn white-btn",onClick:Y},"Submit")])])]),_:1},8,["show"]),r(B,{show:d.value.fileUploadModal,"onUpdate:show":o[20]||(o[20]=s=>d.value.fileUploadModal=s),centerModal:!0,headerClasses:"header-bg"},{header:y(()=>[Ne,e("div",{class:"close-btn",onClick:o[17]||(o[17]=g(s=>d.value.fileUploadModal=!1,["prevent"]))},[r(U)])]),default:y(()=>[e("form",qe,[e("div",Te,[e("div",xe,[t.imagePreview?(l(),i("img",{key:0,src:t.imagePreview,class:"preview-image pic",id:"profilePic",alt:""},null,8,Oe)):(l(),i("img",$e)),e("label",je,n(t.imagePreview?"Change Doc":"Upload Doc"),1),e("input",{class:"uploadProfileInput",type:"file",name:"profile_doc",id:"imgUpload-doc",onChange:o[18]||(o[18]=s=>N(s)),style:{display:"none"}},null,32)]),t.submit&&h.value?(l(),i("div",Fe,n(h.value),1)):c("",!0)])]),e("div",Ge,[e("div",Re,[e("div",{class:"btn red-btn",onClick:o[19]||(o[19]=g(s=>d.value.fileUploadModal=!1,["prevent"]))}," Cancel "),e("div",{class:"btn white-btn",onClick:X},"Submit")])])]),_:1},8,["show"]),r(B,{show:d.value.statusModal,"onUpdate:show":o[26]||(o[26]=s=>d.value.statusModal=s),class:"status-modal",headerClasses:"header-bg"},{header:y(()=>[He,e("div",{class:"close-btn",onClick:o[21]||(o[21]=g(s=>d.value.statusModal=!1,["prevent"]))},[r(U)])]),default:y(()=>[e("div",Qe,[e("label",Ke,[v(e("input",{type:"radio","onUpdate:modelValue":o[22]||(o[22]=s=>t.changeStatus=s),value:"ACTIVE",id:"approve",name:"status"},null,512),[[L,t.changeStatus]]),e("div",Je,[r(it),We])]),e("label",Xe,[v(e("input",{type:"radio","onUpdate:modelValue":o[23]||(o[23]=s=>t.changeStatus=s),value:"PENDING",id:"pending",name:"status"},null,512),[[L,t.changeStatus]]),e("div",Ye,[r(nt),Ze])]),e("label",to,[v(e("input",{type:"radio","onUpdate:modelValue":o[24]||(o[24]=s=>t.changeStatus=s),value:"DEACTIVE",id:"block",name:"status"},null,512),[[L,t.changeStatus]]),e("div",eo,[r(dt),oo])])]),e("div",so,[e("div",ao,[e("div",{class:"btn red-btn",onClick:o[25]||(o[25]=g(s=>d.value.statusModal=!1,["prevent"]))}," Cancel "),e("div",{class:"btn white-btn",onClick:Z},"Submit")])])]),_:1},8,["show"])])}}};export{co as default};
