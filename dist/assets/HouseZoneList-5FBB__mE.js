import{u as G,s as J,x as Q,d as b,e as W,n as X,r as l,o as _,c as p,a as t,b as d,j as c,F as x,z as D,f as M,g as r,w as S,A as Y,t as v,v as tt,E as et,i as ot}from"./index-DwPljJjs.js";import{_ as st}from"./delete-ClllWuc2.js";const nt={class:"user-activity user-profile"},dt={class:"table-card"},it={class:"table-header"},at={class:"left"},lt={class:"title-row"},ct={class:"icon"},rt=t("div",{class:"titles"},[t("div",{class:"sub-title"},"House Zone : List"),t("h5",{class:"main-title"},"Our House Zone")],-1),ut={class:"right"},_t={class:"searchbar"},pt=t("input",{type:"text",placeholder:"Search here"},null,-1),ht={class:"icon"},vt={class:"icons"},mt=t("div",{class:"tooltip"},"Add House Zone",-1),ft={class:"icons"},gt=t("div",{class:"tooltip"},"Assign Product",-1),bt={class:"table-body mt-16"},kt={class:"table-outer"},Ct={class:"table"},wt=t("thead",null,[t("th"),t("th",null,"House Zone"),t("th",{class:"text-center"},"Action")],-1),Mt=["onUpdate:modelValue","onChange"],St={class:"option-btns"},It=["onClick"],yt=t("div",{class:"tooltip"},"Edit",-1),Zt=["onClick"],Ht=t("div",{class:"tooltip"},"View Product",-1),xt=["onClick"],Dt=t("div",{class:"tooltip"},"Delete",-1),zt={key:0,class:"table-no-data"},Pt=t("div",null,"No records Found!",-1),$t=[Pt],Et={class:"title",showHeader:"true"},At={class:"form mb-16"},Ut={class:"form-item mb-16 col-10"},Vt=t("div",{class:"title"},"Name",-1),Nt={key:0,class:"err-msg"},qt={class:"modal-footer"},Ot={class:"btns"},Bt=t("div",{class:"title",showHeader:"true"},"Select product",-1),Ft={class:"form mb-16"},Lt={class:"form-item mb-16 col-10"},Rt=t("div",{class:"title"},"Search Product",-1),Tt={class:"i-grid"},jt=["value"],Kt={class:"plan-details"},Gt=["src"],Jt={class:"modal-footer"},Qt={class:"btns"},Wt=t("div",{class:"title",showHeader:"true"},"Delete",-1),Xt=t("div",{class:"delete-icon"},[t("img",{src:st,alt:""})],-1),Yt=t("h4",{class:"text-gree"},"Are you sure want to Delete?",-1),te={class:"modal-footer"},ee={class:"btns"},oe={class:"title",showHeader:"true"},se={class:"i-card"},ne={class:"plan-details"},de=["src"],ce={__name:"HouseZoneList",setup(ie){const u=G(),k=J();Q();const n=b(()=>u.state.OrganizationSettings),z=b(()=>u.state.IdCardStock),e=W({organizationSettingId:null,organizationId:null,editMode:!1,houseZoneId:null,name:null,priority:null,idCardStockId:null,ids:[]});X(()=>{k.query.id&&(e.organizationSettingId=k.query.settingId,e.organizationId=k.query.id)});function P(){n.value.addModal=!0,e.editMode=!1,e.name=null}function $(i){n.value.addModal=!0,e.editMode=!0,e.houseZoneId=i.id,e.name=i.name}function E(i){e.houseZoneId=i,n.value.confirmModal=!0}function A(){if(C.value){e.submit=!0;return}e.submit=!1,e.editMode?u.dispatch("OrganizationSettings/updateHouseZone",{id:e.houseZoneId,name:e.name,settingId:e.organizationSettingId}):u.dispatch("OrganizationSettings/addHouseZone",{name:e.name,settingId:e.organizationSettingId})}function U(){u.dispatch("OrganizationSettings/deleteHouseZone",{id:e.houseZoneId,status:"DELETED"})}function V(i){const s=e.ids.findIndex(w=>w===i);s<0?e.ids.push(i):e.ids.splice(s,1)}function N(){e.idCardStockId=null,n.value.productModal=!0,I("")}function q(i){e.productDetailModal=!0,e.product=i}const I=i=>{u.dispatch("IdCardStock/getIdCardStocks",{limit:10,offset:0,keyword:i})},O=()=>{if(e.ids.length>0&&e.idCardStockId){const i=[];e.ids.forEach(s=>{i.push({id:s,idCardsStockId:e.idCardStockId})}),u.dispatch("OrganizationSettings/assignHouseProduct",i)}else u.dispatch("Alert/error",{msg:"Either no house zone or select product!"})},C=b(()=>{if(!e.name)return"Please Enter Name"});return b(()=>{if(!e.priority)return"Please Enter Priority"}),(i,s)=>{var y;const w=l("icon-user"),B=l("icon-search"),F=l("icon-plus"),L=l("icon-asign"),R=l("icon-edit"),T=l("icon-info"),j=l("icon-delete"),m=l("icon-cross"),f=l("Modal"),K=l("router-link");return _(),p("section",nt,[t("div",dt,[t("div",it,[t("div",at,[t("div",lt,[t("div",ct,[d(w)]),rt])]),t("div",ut,[t("div",_t,[pt,t("div",ht,[d(B)])]),t("div",vt,[t("div",{class:"icon tooltip-wrapper",onClick:c(P,["prevent"])},[d(F),mt])]),t("div",ft,[t("div",{class:"icon tooltip-wrapper",onClick:s[0]||(s[0]=c(o=>N(),["prevent"]))},[d(L),gt])])])]),t("div",bt,[t("div",kt,[t("table",Ct,[wt,t("tbody",null,[(_(!0),p(x,null,D(n.value.houseZone,(o,h)=>(_(),p("tr",{key:h},[t("td",null,[S(t("input",{type:"checkbox","onUpdate:modelValue":a=>o.checked=a,onChange:a=>V(o.id)},null,40,Mt),[[Y,o.checked]])]),t("td",null,v(o.name),1),t("td",null,[t("div",St,[t("div",{class:"icon tooltip-wrapper",onClick:a=>$(o)},[d(R),yt],8,It),o.idCardsStock?(_(),p("div",{key:0,class:"icon tooltip-wrapper",onClick:a=>q(o)},[d(T),Ht],8,Zt)):M("",!0),t("div",{class:"icon tooltip-wrapper",onClick:c(a=>E(o.id),["prevent"])},[d(j),Dt],8,xt)])])]))),128))])])]),((y=n.value.houseZone)==null?void 0:y.length)<=0?(_(),p("div",zt,$t)):M("",!0)])]),d(f,{show:n.value.addModal,"onUpdate:show":s[4]||(s[4]=o=>n.value.addModal=o),class:"faq-modal",headerClasses:"header-bg"},{header:r(()=>[t("div",Et,v(e.editMode?"Update House Zone":"Add House Zone"),1),t("div",{class:"close-btn",onClick:s[1]||(s[1]=c(o=>n.value.addModal=!1,["prevent"]))},[d(m)])]),default:r(()=>[t("form",At,[t("div",Ut,[Vt,S(t("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>e.name=o),placeholder:"Enter Name",maxlength:"50"},null,512),[[tt,e.name]]),e.submit&&C.value?(_(),p("div",Nt,v(C.value),1)):M("",!0)])]),t("div",qt,[t("div",Ot,[t("div",{class:"btn red-btn",onClick:s[3]||(s[3]=c(o=>n.value.addModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:A},"Submit")])])]),_:1},8,["show"]),d(f,{show:n.value.productModal,"onUpdate:show":s[9]||(s[9]=o=>n.value.productModal=o),class:"faq-modal",headerClasses:"header-bg"},{header:r(()=>[Bt,t("div",{class:"close-btn",onClick:s[5]||(s[5]=c(o=>n.value.productModal=!1,["prevent"]))},[d(m)])]),default:r(()=>[t("div",null,[t("form",Ft,[t("div",Lt,[Rt,t("input",{type:"text",placeholder:"Search Product",onKeydown:s[6]||(s[6]=o=>I(o.target.value))},null,32)])]),t("div",Tt,[(_(!0),p(x,null,D(z.value.data,(o,h)=>{var a;return _(),p("label",{class:"i-card",key:h},[S(t("input",{name:"plan",class:"radio",type:"radio","onUpdate:modelValue":s[7]||(s[7]=g=>e.idCardStockId=g),value:o.id},null,8,jt),[[et,e.idCardStockId]]),t("span",Kt,[t("img",{src:`${(a=o.productImage[0])==null?void 0:a.file}?width=200`,alt:""},null,8,Gt),t("span",null,v(o.title),1)])])}),128))])]),t("div",Jt,[t("div",Qt,[t("div",{class:"btn red-btn",onClick:s[8]||(s[8]=c(o=>n.value.productModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:O},"Assign Product")])])]),_:1},8,["show"]),d(f,{show:n.value.confirmModal,"onUpdate:show":s[12]||(s[12]=o=>n.value.confirmModal=o),class:"confirm-modal",headerClasses:"header-bg"},{header:r(()=>[Wt,t("div",{class:"close-btn",onClick:s[10]||(s[10]=c(o=>n.value.confirmModal=!1,["prevent"]))},[d(m)])]),default:r(()=>[Xt,Yt,t("div",te,[t("div",ee,[t("div",{class:"btn red-btn",onClick:s[11]||(s[11]=c(o=>n.value.confirmModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:U},"Delete")])])]),_:1},8,["show"]),d(f,{show:e.productDetailModal,"onUpdate:show":s[14]||(s[14]=o=>e.productDetailModal=o),class:"faq-modal",headerClasses:"header-bg"},{header:r(()=>{var o;return[t("div",oe," Product For ("+v((o=e.product)==null?void 0:o.name)+") ",1),t("div",{class:"close-btn",onClick:s[13]||(s[13]=c(h=>e.productDetailModal=!1,["prevent"]))},[d(m)])]}),default:r(()=>{var o,h,a,g,Z,H;return[t("div",null,[t("label",se,[t("span",ne,[t("img",{src:`${(a=(h=(o=e.product)==null?void 0:o.idCardsStock)==null?void 0:h.productImage[0])==null?void 0:a.file}?width=200`,alt:"",style:{height:"auto",width:"100%"}},null,8,de),t("span",null,v((Z=(g=e.product)==null?void 0:g.idCardsStock)==null?void 0:Z.title),1)])]),d(K,{class:"btn white-btn",to:{path:"/crm/editor",query:{id:(H=e==null?void 0:e.product)==null?void 0:H.id,from:"House",type:"Student",settingId:e==null?void 0:e.organizationSettingId}}},{default:r(()=>[ot(" Editor ")]),_:1},8,["to"])])]}),_:1},8,["show"])])}}};export{ce as default};
