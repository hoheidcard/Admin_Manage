import{u as lt,x as ct,d as q,e as rt,m as T,n as _t,D as ut,r as d,o as l,c,a as t,b as i,w as u,v as M,p as B,j as w,F as z,z as G,f as v,g as N,t as a,i as r,E as P}from"./index-DwPljJjs.js";const ht={class:"faq-page"},vt={class:"container"},pt={class:"table-card card"},Dt={class:"table-header"},gt={class:"left"},ft={class:"title-row"},bt={class:"icon"},Ct=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Orders : List"),t("h5",{class:"main-title"},"Order List")],-1),mt={class:"right"},yt={class:"searchbar"},wt={class:"icon"},St={class:"searchbar"},Et={class:"select-dropdown"},Ot=t("option",{value:"PENDING"},"PENDING",-1),kt=t("option",{value:"COMPLETED"},"COMPLETED",-1),Nt=t("option",{value:"IN_PROCESS"},"IN_PROCESS",-1),Tt=t("option",{value:"CANCELLED"},"CANCELLED",-1),Mt=[Ot,kt,Nt,Tt],Pt=t("div",{class:"text"},"From",-1),Lt={class:"date-input"},Vt={class:"icon"},At=t("div",{class:"text"},"To",-1),It={class:"date-input"},Yt={class:"icon"},Rt={class:"searchbar"},Ut={class:"select-dropdown"},xt=t("option",{value:"ORDER DATE"},"ORDER DATE",-1),Ft=t("option",{value:"DELIVERY DATE"},"DELIVERY DATE",-1),$t=[xt,Ft],qt={class:"searchbar"},Bt={class:"table-body p-16"},zt={class:"table-outer"},Gt={class:"table"},Ht=t("thead",null,[t("th",null,"Order Date"),t("th",null,"Delivery Date"),t("th",null,"Type"),t("th",null,"Name"),t("th",null,"Contact NO."),t("th",null,"Student/Staff"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1),jt={key:0,class:"badge success-badge"},Qt={key:1,class:"badge warning-badge"},Zt={key:2,class:"badge warning-badge"},Jt={key:3,class:"badge danger-badge"},Kt={class:"option-btns"},Wt=["onClick"],Xt=t("div",{class:"tooltip"},"Order Detail",-1),ts=["onClick"],ss=t("div",{class:"tooltip"},"View",-1),es=["onClick"],os=t("div",{class:"tooltip"},"Download CSV",-1),as=["onClick"],ns=t("div",{class:"tooltip"},"Download Images",-1),is=["onClick"],ds=t("div",{class:"tooltip"},"Status Change",-1),ls={key:0,class:"table-no-data"},cs=t("div",null,"No records Found!",-1),rs=[cs],_s={key:1,class:"table-footer"},us=t("div",{class:"title",showHeader:"true"},"Order Details",-1),hs={key:0,class:"row"},vs={class:"data-list"},ps={class:"data"},Ds={class:"title"},gs=t("b",null,"Order Id :",-1),fs={class:"data"},bs={class:"title"},Cs=t("b",null,"Order Number :",-1),ms={class:"data"},ys={class:"title"},ws=t("b",null,"Approx Qty. :",-1),Ss={class:"data"},Es={class:"title"},Os=t("b",null,"Contact No. :",-1),ks={class:"data"},Ns={class:"title"},Ts=t("b",null,"Order Date :",-1),Ms={class:"data"},Ps={class:"title"},Ls=t("b",null,"Delivery Date :",-1),Vs={class:"data"},As={class:"title"},Is=t("b",null,"Session :",-1),Ys={class:"data"},Rs={class:"title"},Us=t("b",null,"Delivery Address :",-1),xs={class:"data"},Fs={class:"title"},$s=t("b",null,"Parent Card :",-1),qs={class:"data"},Bs={class:"title"},zs=t("b",null,"Type :",-1),Gs={class:"data"},Hs={class:"title"},js=t("b",null,"Status :",-1),Qs=t("hr",null,null,-1),Zs={class:"data"},Js={class:"title"},Ks=t("b",null,"Class :",-1),Ws={class:"data"},Xs={class:"title"},te=t("b",null,"ProClasduct Title :",-1),se=["src"],ee={key:1},oe=t("div",{class:"title",showHeader:"true"},"Change Status",-1),ae={class:"status-row"},ne={for:"approve",class:"data"},ie={class:"data-inner approve-card"},de=t("div",{class:"title"},"COMPLETED",-1),le={for:"pending",class:"data"},ce={class:"data-inner pending-card"},re=t("div",{class:"title"},"IN PROCESS",-1),_e={for:"block",class:"data"},ue={class:"data-inner block-card"},he=t("div",{class:"title"},"CANCELLED",-1),ve={class:"modal-footer"},pe={class:"btns"},fe={__name:"OrderList",setup(De){const h=lt(),p=ct(),_=q(()=>h.state.CardOrder),s=rt({submit:!1,limit:10,offset:0,keyword:"",status:"PENDING",filterType:"ORDER DATE",changeStatus:null,currentPage:1,editMode:!1,fromDate:T().subtract(30,"days").format("YYYY-MM-DD"),toDate:T().format("YYYY-MM-DD"),typingTimer:null,typingDelay:500,id:null,title:null,image:null,file:null,detailsModal:!1,orderDetails:null});_t(()=>{D()}),ut(()=>s.keyword,()=>{clearTimeout(s.typingTimer),s.typingTimer=setTimeout(()=>{s.limit=10,s.offset=0,s.currentPage=1,D()},s.typingDelay)});function D(){h.dispatch("CardOrder/getOrders",{limit:s.limit,offset:s.offset,keyword:s.keyword,status:s.status,fromDate:s.fromDate,toDate:s.toDate,filterType:s.filterType})}function H(n,o){s.changeStatus=o,s.id=n,_.value.statusModal=!0}function j(n){s.detailsModal=!0,s.orderDetails=n}function Q(){s.id&&s.changeStatus&&h.dispatch("CardOrder/updateCardOrderStatus",{id:s.id,status:s.changeStatus})}function Z(n,o){o==="STAFF"&&h.dispatch("CardOrder/downloadStaffCSVByOrderId",{id:n}),o==="STUDENT"&&h.dispatch("CardOrder/downloadStudentCSVByOrderId",{id:n})}function J(n,o){o==="STAFF"&&h.dispatch("CardOrder/downloadStaffFileByOrderId",{id:n}),o==="STUDENT"&&h.dispatch("CardOrder/downloadStudentFileByOrderId",{id:n})}const K=n=>{s.currentPage=n,s.offset=s.limit*(n-1),D()},W=(n,o,g,E)=>{g==="SCHOOL"&&(E==="STUDENT"?p.push({path:"/crm/school/setting/class-list",query:{id:n,settingId:o}}):p.push({path:"/crm/school/setting/designation",query:{id:n,settingId:o}})),g==="COLLEGE"&&(E==="STUDENT"?p.push({path:"/crm/college/setting/class-list",query:{id:n,settingId:o}}):p.push({path:"/crm/college/setting/designation",query:{id:n,settingId:o}})),g==="ORGANIZATION"&&p.push({path:"/crm/organization/setting/designation",query:{id:n,settingId:o}})};function S(n){return n?T(n).format("MMM Do YYYY"):"-"}return q(()=>{if(!s.title)return"Please Enter title"}),(n,o)=>{var I,Y;const g=d("icon-help"),E=d("icon-search"),L=d("icon-calendar"),X=d("icon-eye"),tt=d("icon-info"),st=d("icon-down-arrow-round"),et=d("icon-down-arrow"),ot=d("icon-setting"),at=d("Pagination"),V=d("icon-cross"),A=d("Modal"),nt=d("icon-success"),it=d("icon-warning"),dt=d("icon-block");return l(),c("section",ht,[t("div",vt,[t("div",pt,[t("div",Dt,[t("div",gt,[t("div",ft,[t("div",bt,[i(g)]),Ct])]),t("div",mt,[t("div",yt,[u(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=e=>s.keyword=e),placeholder:"Search here"},null,512),[[M,s.keyword]]),t("div",wt,[i(E)])]),t("div",St,[t("div",Et,[u(t("select",{name:"",id:"","onUpdate:modelValue":o[1]||(o[1]=e=>s.status=e),onChange:D},Mt,544),[[B,s.status]])])]),Pt,t("div",Lt,[u(t("input",{type:"date",class:"w-12-r-i","onUpdate:modelValue":o[2]||(o[2]=e=>s.fromDate=e)},null,512),[[M,s.fromDate]]),t("div",Vt,[i(L)])]),At,t("div",It,[u(t("input",{type:"date",class:"w-12-r-i","onUpdate:modelValue":o[3]||(o[3]=e=>s.toDate=e)},null,512),[[M,s.toDate]]),t("div",Yt,[i(L)])]),t("div",Rt,[t("div",Ut,[u(t("select",{name:"",id:"","onUpdate:modelValue":o[4]||(o[4]=e=>s.filterType=e)},$t,512),[[B,s.filterType]])])]),t("div",qt,[t("button",{class:"btn white-btn w-full",type:"button",onClick:w(D,["prevent"])}," Submit ")])])]),t("div",Bt,[t("div",zt,[t("table",Gt,[Ht,t("tbody",null,[(l(!0),c(z,null,G(_.value.data,(e,f)=>{var O,b,C,m,y;return l(),c("tr",{key:f},[t("td",null,a(S(e.orderDate)),1),t("td",null,a(S(e.deliveryDate)),1),t("td",null,a((C=(b=(O=e.setting)==null?void 0:O.organizationDetail[0])==null?void 0:b.account)==null?void 0:C.roles),1),t("td",null,a((y=(m=e.setting)==null?void 0:m.organizationDetail[0])==null?void 0:y.name),1),t("td",null,a(e.contactNumber),1),t("td",null,a(e.type),1),t("td",null,[e.status==="COMPLETED"?(l(),c("div",jt,a(e.status),1)):v("",!0),e.status==="IN_PROCESS"?(l(),c("div",Qt,a(e.status),1)):v("",!0),e.status==="PENDING"?(l(),c("div",Zt,a(e.status),1)):v("",!0),e.status==="CANCELLED"?(l(),c("div",Jt,a(e.status),1)):v("",!0)]),t("td",null,[t("div",Kt,[t("div",{class:"icon tooltip-wrapper",onClick:k=>j(e)},[i(X),Xt],8,Wt),t("div",{class:"icon tooltip-wrapper",onClick:k=>{var R,U,x,F,$;return W((U=(R=e.setting)==null?void 0:R.organizationDetail[0])==null?void 0:U.id,e.setting.id,($=(F=(x=e.setting)==null?void 0:x.organizationDetail[0])==null?void 0:F.account)==null?void 0:$.roles,e.type)}},[i(tt),ss],8,ts),t("div",{class:"icon tooltip-wrapper",onClick:k=>Z(e.id,e.type)},[i(st),os],8,es),t("div",{class:"icon tooltip-wrapper",onClick:k=>J(e.id,e.type)},[i(et),ns],8,as),t("div",{class:"icon tooltip-wrapper",onClick:w(k=>H(e.id,e.status),["prevent"])},[i(ot),ds],8,is)])])])}),128))])])]),((I=_.value.data)==null?void 0:I.length)<=0?(l(),c("div",ls,rs)):v("",!0),((Y=_.value.data)==null?void 0:Y.length)>0?(l(),c("div",_s,[i(at,{currentPage:s.currentPage,totalItem:_.value.total,itemsPerPage:s.limit,"onUpdate:currentPage":o[5]||(o[5]=e=>K(e))},null,8,["currentPage","totalItem","itemsPerPage"])])):v("",!0)])])]),i(A,{show:s.detailsModal,"onUpdate:show":o[7]||(o[7]=e=>s.detailsModal=e),class:"faq-modal",headerClasses:"header-bg"},{header:N(()=>[us,t("div",{class:"close-btn",onClick:o[6]||(o[6]=w(e=>s.detailsModal=!1,["prevent"]))},[i(V)])]),default:N(()=>{var e;return[s.orderDetails?(l(),c("div",hs,[t("div",vs,[t("div",ps,[t("div",Ds,[gs,r(a(s.orderDetails.id),1)])]),t("div",fs,[t("div",bs,[Cs,r("Order-"+a(s.orderDetails.orderNumber),1)])]),t("div",ms,[t("div",ys,[ws,r(a(s.orderDetails.qty),1)])]),t("div",Ss,[t("div",Es,[Os,r(a(s.orderDetails.contactNumber),1)])]),t("div",ks,[t("div",Ns,[Ts,r(a(S(s.orderDetails.orderDate)),1)])]),t("div",Ms,[t("div",Ps,[Ls,r(a(S(s.orderDetails.deliveryDate)),1)])]),t("div",Vs,[t("div",As,[Is,r(a(s.orderDetails.fromYear)+"-"+a(s.orderDetails.toYear),1)])]),t("div",Ys,[t("div",Rs,[Us,r(a(s.orderDetails.deliveryAddress),1)])]),t("div",xs,[t("div",Fs,[$s,r(a(s.orderDetails.parentCard?"Yes":"No"),1)])]),t("div",qs,[t("div",Bs,[zs,r(a(s.orderDetails.type),1)])]),t("div",Gs,[t("div",Hs,[js,r(a(s.orderDetails.status),1)])]),(l(!0),c(z,null,G((e=s.orderDetails)==null?void 0:e.cardOrderList,(f,O)=>{var b,C,m,y;return l(),c("div",{key:O},[Qs,t("div",Zs,[t("div",Js,[Ks,r(a((b=f.classList)==null?void 0:b.name),1)])]),t("div",Ws,[t("div",Xs,[te,r(" "+a((C=f.classList)==null?void 0:C.idCardsStock.title),1)]),t("div",null,[t("img",{src:`${(y=(m=f.classList)==null?void 0:m.idCardsStock)==null?void 0:y.image}?width=200`,alt:""},null,8,se)])])])}),128))])])):(l(),c("div",ee,"No data available. Please select order!"))]}),_:1},8,["show"]),i(A,{show:_.value.statusModal,"onUpdate:show":o[13]||(o[13]=e=>_.value.statusModal=e),class:"status-modal",headerClasses:"header-bg"},{header:N(()=>[oe,t("div",{class:"close-btn",onClick:o[8]||(o[8]=w(e=>_.value.statusModal=!1,["prevent"]))},[i(V)])]),default:N(()=>[t("div",ae,[t("label",ne,[u(t("input",{type:"radio","onUpdate:modelValue":o[9]||(o[9]=e=>s.changeStatus=e),value:"COMPLETED",id:"approve",name:"status"},null,512),[[P,s.changeStatus]]),t("div",ie,[i(nt),de])]),t("label",le,[u(t("input",{type:"radio","onUpdate:modelValue":o[10]||(o[10]=e=>s.changeStatus=e),value:"IN_PROCESS",id:"pending",name:"status"},null,512),[[P,s.changeStatus]]),t("div",ce,[i(it),re])]),t("label",_e,[u(t("input",{type:"radio","onUpdate:modelValue":o[11]||(o[11]=e=>s.changeStatus=e),value:"CANCELLED",id:"block",name:"status"},null,512),[[P,s.changeStatus]]),t("div",ue,[i(dt),he])])]),t("div",ve,[t("div",pe,[t("div",{class:"btn red-btn",onClick:o[12]||(o[12]=w(e=>_.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:Q},"Submit")])])]),_:1},8,["show"])])}}};export{fe as default};
