import{u as tt,s as et,x as ot,d as C,e as st,n as it,r as l,o as u,c as p,a as t,b as d,j as r,F as $,z,f as b,g as _,w as k,A as nt,t as v,v as E,E as dt,i as at}from"./index-DwPljJjs.js";import{_ as lt}from"./delete-ClllWuc2.js";const rt={class:"user-activity user-profile"},ct={class:"table-card"},ut={class:"table-header"},pt={class:"left"},_t={class:"title-row"},vt={class:"icon"},ht=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Designation : List"),t("h5",{class:"main-title"},"Our Designation")],-1),gt={class:"right"},mt={class:"searchbar"},ft=t("input",{type:"text",placeholder:"Search here"},null,-1),Ct={class:"icon"},bt={class:"icons"},kt=t("div",{class:"tooltip"},"Add Designation",-1),yt={class:"icons"},wt=t("div",{class:"tooltip"},"Final Card",-1),Mt={class:"icons"},St=t("div",{class:"tooltip"},"Assign Product",-1),It={class:"table-body mt-16"},Dt={class:"table-outer"},xt={class:"table"},Pt=t("thead",null,[t("th"),t("th",null,"Designation Name"),t("th",null,"Priority"),t("th",{class:"text-center"},"Action")],-1),$t=["onUpdate:modelValue","onChange"],zt={class:"option-btns"},Et=["onClick"],Nt=t("div",{class:"tooltip"},"Edit",-1),Vt=["onClick"],At=t("div",{class:"tooltip"},"View Product",-1),Ut=["onClick"],qt=t("div",{class:"tooltip"},"Delete",-1),Ot={key:0,class:"table-no-data"},Ft=t("div",null,"No records Found!",-1),Bt=[Ft],Ht={class:"title",showHeader:"true"},Lt={class:"form mb-16"},Rt={class:"form-item mb-16 col-10"},Tt=t("div",{class:"title"},"Name",-1),jt={key:0,class:"err-msg"},Kt={class:"form-item mb-16 col-10"},Jt=t("div",{class:"title"},"Priority",-1),Gt={key:0,class:"err-msg"},Qt={class:"modal-footer"},Wt={class:"btns"},Xt=t("div",{class:"title",showHeader:"true"},"Delete",-1),Yt=t("div",{class:"delete-icon"},[t("img",{src:lt,alt:""})],-1),Zt=t("h4",{class:"text-gree"},"Are you sure want to Delete?",-1),te={class:"modal-footer"},ee={class:"btns"},oe=t("div",{class:"title",showHeader:"true"},"Select product",-1),se={class:"form mb-16"},ie={class:"form-item mb-16 col-10"},ne=t("div",{class:"title"},"Search Product",-1),de={class:"i-grid"},ae=["value"],le={class:"plan-details"},re=["src"],ce={class:"modal-footer"},ue={class:"btns"},pe={class:"title",showHeader:"true"},_e={class:"i-card"},ve={class:"plan-details"},he=["src"],Ce={__name:"DesignationList",setup(ge){const c=tt(),y=et(),N=ot(),n=C(()=>c.state.OrganizationSettings),V=C(()=>c.state.IdCardStock),e=st({organizationSettingId:null,organizationId:null,editMode:!1,designationId:null,name:null,priority:null,idCardStockId:null,productDetailModal:!1,product:null,ids:[]});it(()=>{y.query.id&&(e.organizationSettingId=y.query.settingId,e.organizationId=y.query.id)});function A(){n.value.addModal=!0,e.editMode=!1,e.name=null,e.priority=null}function U(i){n.value.addModal=!0,e.editMode=!0,e.designationId=i.id,e.name=i.name,e.priority=i.priority}function q(i){e.designationId=i,n.value.confirmModal=!0}function O(){e.idCardStockId=null,n.value.productModal=!0,I("")}function F(i){e.productDetailModal=!0,e.product=i}const I=i=>{c.dispatch("IdCardStock/getIdCardStocks",{limit:10,offset:0,keyword:i})},B=()=>{if(e.ids.length>0&&e.idCardStockId){const i=[];e.ids.forEach(o=>{i.push({id:o,idCardsStockId:e.idCardStockId})}),c.dispatch("OrganizationSettings/assignDesignationProduct",i)}else c.dispatch("Alert/error",{msg:"Either no designation or select product!"})},H=i=>{e.ids.length>0?N.push({path:"/crm/college/final-staff-id-card",query:{classId:JSON.stringify(e.ids),organizationId:e.organizationId,status:i}}):c.dispatch("Alert/error",{msg:"Please seclect class!"})};function L(){if(w.value||M.value){e.submit=!0;return}e.submit=!1,e.editMode?c.dispatch("OrganizationSettings/updateDesignation",{id:e.designationId,name:e.name,priority:e.priority,settingId:e.organizationSettingId}):c.dispatch("OrganizationSettings/addDesignation",{name:e.name,priority:e.priority,settingId:e.organizationSettingId})}function R(){c.dispatch("OrganizationSettings/deleteDesignation",{id:e.designationId,status:"DELETED"})}function T(i){const o=e.ids.findIndex(S=>S===i);o<0?e.ids.push(i):e.ids.splice(o,1)}const w=C(()=>{if(!e.name)return"Please Enter Name"}),M=C(()=>{if(!e.priority)return"Please Enter Priority"});function j(i){let o=String.fromCharCode(i.keyCode);if(/^[0-9]+$/.test(o)||i.keyCode===8||i.keyCode===9||i.keyCode===37||i.keyCode===39||i.keyCode>=96&&i.keyCode<=105)return!0;i.preventDefault()}return(i,o)=>{var D;const S=l("icon-user"),K=l("icon-search"),J=l("icon-plus"),G=l("icon-card"),Q=l("icon-asign"),W=l("icon-edit"),X=l("icon-info"),Y=l("icon-delete"),g=l("icon-cross"),m=l("Modal"),Z=l("router-link");return u(),p("section",rt,[t("div",ct,[t("div",ut,[t("div",pt,[t("div",_t,[t("div",vt,[d(S)]),ht])]),t("div",gt,[t("div",mt,[ft,t("div",Ct,[d(K)])]),t("div",bt,[t("div",{class:"icon tooltip-wrapper",onClick:r(A,["prevent"])},[d(J),kt])]),t("div",yt,[t("div",{class:"icon tooltip-wrapper",onClick:o[0]||(o[0]=r(s=>H(),["prevent"]))},[d(G),wt])]),t("div",Mt,[t("div",{class:"icon tooltip-wrapper",onClick:o[1]||(o[1]=r(s=>O(),["prevent"]))},[d(Q),St])])])]),t("div",It,[t("div",Dt,[t("table",xt,[Pt,t("tbody",null,[(u(!0),p($,null,z(n.value.designation,(s,h)=>(u(),p("tr",{key:h},[t("td",null,[k(t("input",{type:"checkbox","onUpdate:modelValue":a=>s.checked=a,onChange:a=>T(s.id)},null,40,$t),[[nt,s.checked]])]),t("td",null,v(s.name),1),t("td",null,v(s.priority),1),t("td",null,[t("div",zt,[t("div",{class:"icon tooltip-wrapper",onClick:a=>U(s)},[d(W),Nt],8,Et),s.idCardsStock?(u(),p("div",{key:0,class:"icon tooltip-wrapper",onClick:a=>F(s)},[d(X),At],8,Vt)):b("",!0),t("div",{class:"icon tooltip-wrapper",onClick:r(a=>q(s.id),["prevent"])},[d(Y),qt],8,Ut)])])]))),128))])])]),((D=n.value.designation)==null?void 0:D.length)<=0?(u(),p("div",Ot,Bt)):b("",!0)])]),d(m,{show:n.value.addModal,"onUpdate:show":o[7]||(o[7]=s=>n.value.addModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:_(()=>[t("div",Ht,v(e.editMode?"Update Designation":"Add Designation"),1),t("div",{class:"close-btn",onClick:o[2]||(o[2]=r(s=>n.value.addModal=!1,["prevent"]))},[d(g)])]),default:_(()=>[t("form",Lt,[t("div",Rt,[Tt,k(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>e.name=s),placeholder:"Enter Name",maxlength:"50"},null,512),[[E,e.name]]),e.submit&&w.value?(u(),p("div",jt,v(w.value),1)):b("",!0)]),t("div",Kt,[Jt,k(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=s=>e.priority=s),placeholder:"Enter Priority",onKeydown:o[5]||(o[5]=s=>j(s)),maxlength:"10"},null,544),[[E,e.priority]]),e.submit&&M.value?(u(),p("div",Gt,v(M.value),1)):b("",!0)])]),t("div",Qt,[t("div",Wt,[t("div",{class:"btn red-btn",onClick:o[6]||(o[6]=r(s=>n.value.addModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:L},"Submit")])])]),_:1},8,["show"]),d(m,{show:n.value.confirmModal,"onUpdate:show":o[10]||(o[10]=s=>n.value.confirmModal=s),class:"confirm-modal",headerClasses:"header-bg"},{header:_(()=>[Xt,t("div",{class:"close-btn",onClick:o[8]||(o[8]=r(s=>n.value.confirmModal=!1,["prevent"]))},[d(g)])]),default:_(()=>[Yt,Zt,t("div",te,[t("div",ee,[t("div",{class:"btn red-btn",onClick:o[9]||(o[9]=r(s=>n.value.confirmModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:R},"Delete")])])]),_:1},8,["show"]),d(m,{show:n.value.productModal,"onUpdate:show":o[15]||(o[15]=s=>n.value.productModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:_(()=>[oe,t("div",{class:"close-btn",onClick:o[11]||(o[11]=r(s=>n.value.productModal=!1,["prevent"]))},[d(g)])]),default:_(()=>[t("div",null,[t("form",se,[t("div",ie,[ne,t("input",{type:"text",placeholder:"Search Product",onKeydown:o[12]||(o[12]=s=>I(s.target.value))},null,32)])]),t("div",de,[(u(!0),p($,null,z(V.value.data,(s,h)=>{var a;return u(),p("label",{class:"i-card",key:h},[k(t("input",{name:"plan",class:"radio",type:"radio","onUpdate:modelValue":o[13]||(o[13]=f=>e.idCardStockId=f),value:s.id},null,8,ae),[[dt,e.idCardStockId]]),t("span",le,[t("img",{src:`${(a=s.productImage[0])==null?void 0:a.file}?width=200`,alt:""},null,8,re),t("span",null,v(s.title),1)])])}),128))])]),t("div",ce,[t("div",ue,[t("div",{class:"btn red-btn",onClick:o[14]||(o[14]=r(s=>n.value.productModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:B},"Assign Product")])])]),_:1},8,["show"]),d(m,{show:e.productDetailModal,"onUpdate:show":o[17]||(o[17]=s=>e.productDetailModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:_(()=>{var s;return[t("div",pe," Product For ("+v((s=e.product)==null?void 0:s.name)+") ",1),t("div",{class:"close-btn",onClick:o[16]||(o[16]=r(h=>e.productDetailModal=!1,["prevent"]))},[d(g)])]}),default:_(()=>{var s,h,a,f,x,P;return[t("div",null,[t("label",_e,[t("span",ve,[t("img",{src:`${(a=(h=(s=e.product)==null?void 0:s.idCardsStock)==null?void 0:h.productImage[0])==null?void 0:a.file}?width=200`,alt:"",style:{height:"auto",width:"100%"}},null,8,he),t("span",null,v((x=(f=e.product)==null?void 0:f.idCardsStock)==null?void 0:x.title),1)])]),d(Z,{class:"btn white-btn",to:{path:"/crm/editor",query:{id:(P=e==null?void 0:e.product)==null?void 0:P.id,from:"Designation",type:"Staff",settingId:e==null?void 0:e.organizationSettingId}}},{default:_(()=>[at(" Editor ")]),_:1},8,["to"])])]}),_:1},8,["show"])])}}};export{Ce as default};
