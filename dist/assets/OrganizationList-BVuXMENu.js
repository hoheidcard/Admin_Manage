import{u as J,s as K,x as Q,d as W,e as X,n as Y,D as tt,r as a,o as c,c as d,a as t,b as n,w as _,v as st,p as ot,F as et,z as at,f as u,g as b,i as nt,t as r,j as p,E as y}from"./index-DwPljJjs.js";const it={class:"faq-page"},lt={class:"table-card card"},ct={class:"table-header"},dt={class:"left"},rt={class:"title-row"},ut={class:"icon"},_t=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Organization : List"),t("h5",{class:"main-title"},"Our Organization")],-1),pt={class:"right"},ht={class:"searchbar"},gt={class:"icon"},vt={class:"searchbar"},mt={class:"select-dropdown"},ft=t("option",{value:"ACTIVE"},"ACTIVE",-1),bt=t("option",{value:"PENDING"},"PENDING",-1),yt=t("option",{value:"DEACTIVE"},"DEACTIVE",-1),Ct=[ft,bt,yt],kt={class:"table-body p-16"},It={class:"table-outer"},Dt={class:"table"},wt=t("thead",null,[t("th"),t("th",null,"Name"),t("th",null,"Contact No"),t("th",null,"Created By"),t("th",null,"State/City"),t("th",null,"Type"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1),St={key:0,class:"zoom-image"},Et=["src"],zt={key:0,class:"badge success-badge"},Vt={key:1,class:"badge warning-badge"},Nt={key:2,class:"badge danger-badge"},Tt={class:"option-btns"},Pt=["onClick"],Mt=t("div",{class:"tooltip"},"Edit",-1),At=["onClick"],Ot=t("div",{class:"tooltip"},"Change Status",-1),$t=["onClick"],xt=t("div",{class:"tooltip"},"My Branch",-1),Ut=["onClick"],Bt=t("div",{class:"tooltip"},"Setttngs",-1),Gt={key:0,class:"table-no-data"},qt=t("div",null,"No records Found!",-1),Rt=[qt],Ft={key:1,class:"table-footer"},Lt=t("div",{class:"title",showHeader:"true"},"Change Status",-1),jt={class:"status-row"},Ht={for:"approve",class:"data"},Zt={class:"data-inner approve-card"},Jt=t("div",{class:"title"},"ACTIVE",-1),Kt={for:"pending",class:"data"},Qt={class:"data-inner pending-card"},Wt=t("div",{class:"title"},"PENDING",-1),Xt={for:"block",class:"data"},Yt={class:"data-inner block-card"},ts=t("div",{class:"title"},"DEACTIVE",-1),ss={class:"modal-footer"},os={class:"btns"},as={__name:"OrganizationList",props:{fromDate:{type:String,default:!0},toDate:{type:String,required:!0},all:{type:String,required:!0}},setup(V){const g=V,v=J();K();const C=Q(),i=W(()=>v.state.Dashboard),o=X({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"ORGANIZATION",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,organizationAccountId:null,changeStatus:null});Y(()=>{h()}),tt(()=>o.keyword,()=>{clearTimeout(o.typingTimer),o.typingTimer=setTimeout(()=>{o.limit=10,o.offset=0,o.currentPage=1,h()},o.typingDelay)});function h(){v.dispatch("Dashboard/getOrganization",{limit:o.limit,offset:o.offset,keyword:o.keyword,status:o.status,roles:o.roles,fromDate:g.fromDate,toDate:g.toDate,all:g.all})}function N(l,e){o.changeStatus=e,o.organizationId=l,i.value.statusModal=!0}function T(){v.dispatch("Organization/updateOrganizationStatus",{id:o.organizationId,status:o.changeStatus}),i.value.statusModal=!1}const P=l=>{o.currentPage=l,o.offset=o.limit*(l-1),h()};function M(){h()}function A(l,e){C.push({path:e,query:{id:l}})}function k(l,e,m){C.push({path:m,query:{id:l,settingId:e}})}return(l,e)=>{var I,D;const m=a("icon-organizations"),O=a("icon-search"),$=a("router-link"),x=a("icon-edit"),U=a("icon-status"),B=a("icon-menu"),G=a("icon-setting"),q=a("Pagination"),R=a("icon-cross"),F=a("icon-success"),L=a("icon-warning"),j=a("icon-block"),H=a("Modal");return c(),d("section",it,[t("div",lt,[t("div",ct,[t("div",dt,[t("div",rt,[t("div",ut,[n(m)]),_t])]),t("div",pt,[t("div",ht,[_(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>o.keyword=s),placeholder:"Search here"},null,512),[[st,o.keyword]]),t("div",gt,[n(O)])]),t("div",vt,[t("div",mt,[_(t("select",{name:"",id:"","onUpdate:modelValue":e[1]||(e[1]=s=>o.status=s),onChange:M},Ct,544),[[ot,o.status]])])])])]),t("div",kt,[t("div",It,[t("table",Dt,[wt,t("tbody",null,[(c(!0),d(et,null,at(i.value.organizationData,(s,Z)=>{var w,S,E,z;return c(),d("tr",{key:Z},[t("td",null,[s.image?(c(),d("div",St,[t("img",{src:`${s.image}?width=200`,alt:""},null,8,Et)])):u("",!0)]),t("td",null,[n($,{to:`/crm/organization/setting/department?id=${s.id}&settingId=${s.settingId}`,class:"profile-link hover-color"},{default:b(()=>[nt(r(s.name),1)]),_:2},1032,["to"])]),t("td",null,r(s.contactNo),1),t("td",null,r(((S=(w=s.updated)==null?void 0:w.staffDetail)==null?void 0:S.name)||((z=(E=s.updated)==null?void 0:E.partnerDetail[0])==null?void 0:z.firmName)),1),t("td",null,r(s.state)+"/"+r(s.city),1),t("td",null,r(s.type),1),t("td",null,[s.status==="ACTIVE"?(c(),d("div",zt,r(s.status),1)):u("",!0),s.status==="PENDING"?(c(),d("div",Vt,r(s.status),1)):u("",!0),s.status==="DEACTIVE"?(c(),d("div",Nt,r(s.status),1)):u("",!0)]),t("td",null,[t("div",Tt,[t("div",{class:"icon tooltip-wrapper",onClick:f=>A(s.id,"/crm/edit-organization")},[n(x),Mt],8,Pt),t("div",{class:"icon tooltip-wrapper",onClick:p(f=>N(s.id,s.status),["prevent"])},[n(U),Ot],8,At),t("div",{class:"icon tooltip-wrapper",onClick:p(f=>k(s.accountId,s.settingId,"/crm/organization/my-branch"),["prevent"])},[n(B),xt],8,$t),t("div",{class:"icon tooltip-wrapper",onClick:p(f=>k(s.id,s.settingId,"/crm/organization/setting/designation"),["prevent"])},[n(G),Bt],8,Ut)])])])}),128))])])]),((I=i.value.organizationData)==null?void 0:I.length)<=0?(c(),d("div",Gt,Rt)):u("",!0),((D=i.value.organizationData)==null?void 0:D.length)>0?(c(),d("div",Ft,[n(q,{currentPage:o.currentPage,totalItem:i.value.totalOrganization,itemsPerPage:o.limit,"onUpdate:currentPage":e[2]||(e[2]=s=>P(s))},null,8,["currentPage","totalItem","itemsPerPage"])])):u("",!0)])]),n(H,{show:i.value.statusModal,"onUpdate:show":e[8]||(e[8]=s=>i.value.statusModal=s),class:"status-modal",headerClasses:"header-bg"},{header:b(()=>[Lt,t("div",{class:"close-btn",onClick:e[3]||(e[3]=p(s=>i.value.statusModal=!1,["prevent"]))},[n(R)])]),default:b(()=>[t("div",jt,[t("label",Ht,[_(t("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=s=>o.changeStatus=s),value:"ACTIVE",id:"approve",name:"status"},null,512),[[y,o.changeStatus]]),t("div",Zt,[n(F),Jt])]),t("label",Kt,[_(t("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=s=>o.changeStatus=s),value:"PENDING",id:"pending",name:"status"},null,512),[[y,o.changeStatus]]),t("div",Qt,[n(L),Wt])]),t("label",Xt,[_(t("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=s=>o.changeStatus=s),value:"DEACTIVE",id:"block",name:"status"},null,512),[[y,o.changeStatus]]),t("div",Yt,[n(j),ts])])]),t("div",ss,[t("div",os,[t("div",{class:"btn red-btn",onClick:e[7]||(e[7]=p(s=>i.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:T},"Submit")])])]),_:1},8,["show"])])}}};export{as as default};
