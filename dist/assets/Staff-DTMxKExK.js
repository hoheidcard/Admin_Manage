import{u as K,s as Q,x as W,d as X,e as Y,n as tt,D as st,r as l,o as n,c as i,a as t,b as a,w as p,v as ot,p as et,F as at,z as nt,f as r,t as u,j as _,g as A,E as k}from"./index-DwPljJjs.js";const it={class:"faq-page"},lt={class:"table-card card"},ct={class:"table-header"},dt={class:"left"},rt={class:"title-row"},ut={class:"icon"},_t=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Staff : List"),t("h5",{class:"main-title"},"Our Staff List")],-1),pt={class:"right"},ht={class:"searchbar"},vt={class:"icon"},ft={class:"searchbar"},gt={class:"select-dropdown"},mt=t("option",{value:"ACTIVE"},"ACTIVE",-1),bt=t("option",{value:"PENDING"},"PENDING",-1),yt=t("option",{value:"DEACTIVE"},"DEACTIVE",-1),kt=[mt,bt,yt],Ct={class:"table-body p-16"},St={class:"table-outer"},Dt={class:"table"},It=t("thead",null,[t("th",null,"#"),t("th",null,"Name"),t("th",null,"Phone"),t("th",null,"Firm Name"),t("th",null,"Designation"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1),wt={key:0,class:"zoom-image"},Et=["src"],Pt={key:0,class:"badge success-badge"},Vt={key:1,class:"badge warning-badge"},Tt={key:2,class:"badge danger-badge"},Nt={class:"option-btns"},At=["onClick"],Mt=t("div",{class:"tooltip"},"Permission",-1),zt=["onClick"],Ft=t("div",{class:"tooltip"},"Change Status",-1),$t=["onClick"],xt=t("div",{class:"tooltip"},"Profile",-1),Gt=["onClick"],Ut=t("div",{class:"tooltip"},"Profile",-1),Lt=["onClick"],Ot=t("div",{class:"tooltip"},"Profile",-1),qt={key:0,class:"table-no-data"},Bt=t("div",null,"No records Found!",-1),Rt=[Bt],Ht={key:1,class:"table-footer"},jt=t("div",{class:"title",showHeader:"true"},"Change Status",-1),Zt={class:"status-row"},Jt={for:"approve",class:"data"},Kt={class:"data-inner approve-card"},Qt=t("div",{class:"title"},"ACTIVE",-1),Wt={for:"pending",class:"data"},Xt={class:"data-inner pending-card"},Yt=t("div",{class:"title"},"PENDING",-1),ts={for:"block",class:"data"},ss={class:"data-inner block-card"},os=t("div",{class:"title"},"DEACTIVE",-1),es={class:"modal-footer"},as={class:"btns"},is={__name:"Staff",props:{fromDate:{type:String,default:!0},toDate:{type:String,required:!0},all:{type:String,required:!0}},setup(M){const f=M,g=K();Q();const C=W(),c=X(()=>g.state.Dashboard),o=Y({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"STAFF",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,id:null,partnersAccountId:null,changeStatus:null});tt(()=>{h()}),st(()=>o.keyword,()=>{clearTimeout(o.typingTimer),o.typingTimer=setTimeout(()=>{o.limit=10,o.offset=0,o.currentPage=1,h()},o.typingDelay)});function h(){g.dispatch("Dashboard/getStaffs",{limit:o.limit,offset:o.offset,keyword:o.keyword,status:o.status,fromDate:f.fromDate,toDate:f.toDate,roles:"STAFF",all:f.all})}function z(d,e){o.changeStatus=e,o.id=d,c.value.statusModal=!0}function F(){g.dispatch("Partners/updatePartnersStatus",{id:o.id,status:o.changeStatus}),c.value.statusModal=!1}const $=d=>{o.currentPage=d,o.offset=o.limit*(d-1),h()};function x(){h()}function G(d,e){C.push({path:e,query:{id:d}})}function m(d,e,b){C.push({path:b,query:{id:d,settingId:e}})}return(d,e)=>{var S,D;const b=l("icon-partner"),U=l("icon-search"),L=l("icon-permission"),O=l("icon-status"),y=l("icon-profile"),q=l("Pagination"),B=l("icon-cross"),R=l("icon-success"),H=l("icon-warning"),j=l("icon-block"),Z=l("Modal");return n(),i("section",it,[t("div",lt,[t("div",ct,[t("div",dt,[t("div",rt,[t("div",ut,[a(b)]),_t])]),t("div",pt,[t("div",ht,[p(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>o.keyword=s),placeholder:"Search here"},null,512),[[ot,o.keyword]]),t("div",vt,[a(U)])]),t("div",ft,[t("div",gt,[p(t("select",{name:"",id:"","onUpdate:modelValue":e[1]||(e[1]=s=>o.status=s),onChange:x},kt,544),[[et,o.status]])])])])]),t("div",Ct,[t("div",St,[t("table",Dt,[It,t("tbody",null,[(n(!0),i(at,null,nt(c.value.staffData,(s,J)=>{var I,w,E,P,V,T,N;return n(),i("tr",{key:J},[t("td",null,[s.profile?(n(),i("div",wt,[t("img",{src:`${s.profile}?width=200`,alt:""},null,8,Et)])):r("",!0)]),t("td",null,u(s.name),1),t("td",null,u((I=s.account)==null?void 0:I.phoneNumber),1),t("td",null,u((w=s.organizationDetail)==null?void 0:w.name)+" ("+u((E=s.organizationDetail)==null?void 0:E.account.roles)+") ",1),t("td",null,u((P=s.designation)==null?void 0:P.name),1),t("td",null,[s.status==="ACTIVE"?(n(),i("div",Pt,u(s.status),1)):r("",!0),s.status==="PENDING"?(n(),i("div",Vt,u(s.status),1)):r("",!0),s.status==="DEACTIVE"?(n(),i("div",Tt,u(s.status),1)):r("",!0)]),t("td",null,[t("div",Nt,[t("div",{class:"icon tooltip-wrapper",onClick:_(v=>G(s.accountId,"/crm/staff-permission"),["prevent"])},[a(L),Mt],8,At),t("div",{class:"icon tooltip-wrapper",onClick:_(v=>z(s.accountId,s.status),["prevent"])},[a(O),Ft],8,zt),((V=s.organizationDetail)==null?void 0:V.account.roles)==="SCHOOL"?(n(),i("div",{key:0,class:"icon tooltip-wrapper",onClick:_(v=>m(s.accountId,s.settingId,"/crm/school-staff-profile-layout"),["prevent"])},[a(y),xt],8,$t)):r("",!0),((T=s.organizationDetail)==null?void 0:T.account.roles)==="ORGANIZATION"?(n(),i("div",{key:1,class:"icon tooltip-wrapper",onClick:_(v=>m(s.accountId,o.organizationSettingId,"/crm/organization-staff-profile-layout"),["prevent"])},[a(y),Ut],8,Gt)):r("",!0),((N=s.organizationDetail)==null?void 0:N.account.roles)==="COLLEGE"?(n(),i("div",{key:2,class:"icon tooltip-wrapper",onClick:_(v=>m(s.accountId,o.organizationSettingId,"/crm/college-staff-profile-layout"),["prevent"])},[a(y),Ot],8,Lt)):r("",!0)])])])}),128))])])]),((S=c.value.staffData)==null?void 0:S.length)<=0?(n(),i("div",qt,Rt)):r("",!0),((D=c.value.staffData)==null?void 0:D.length)>0?(n(),i("div",Ht,[a(q,{currentPage:o.currentPage,totalItem:c.value.totalStaff,itemsPerPage:o.limit,"onUpdate:currentPage":e[2]||(e[2]=s=>$(s))},null,8,["currentPage","totalItem","itemsPerPage"])])):r("",!0)])]),a(Z,{show:c.value.statusModal,"onUpdate:show":e[8]||(e[8]=s=>c.value.statusModal=s),class:"status-modal",headerClasses:"header-bg"},{header:A(()=>[jt,t("div",{class:"close-btn",onClick:e[3]||(e[3]=_(s=>c.value.statusModal=!1,["prevent"]))},[a(B)])]),default:A(()=>[t("div",Zt,[t("label",Jt,[p(t("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=s=>o.changeStatus=s),value:"ACTIVE",id:"approve",name:"status"},null,512),[[k,o.changeStatus]]),t("div",Kt,[a(R),Qt])]),t("label",Wt,[p(t("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=s=>o.changeStatus=s),value:"PENDING",id:"pending",name:"status"},null,512),[[k,o.changeStatus]]),t("div",Xt,[a(H),Yt])]),t("label",ts,[p(t("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=s=>o.changeStatus=s),value:"DEACTIVE",id:"block",name:"status"},null,512),[[k,o.changeStatus]]),t("div",ss,[a(j),os])])]),t("div",es,[t("div",as,[t("div",{class:"btn red-btn",onClick:e[7]||(e[7]=_(s=>c.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:F},"Submit")])])]),_:1},8,["show"])])}}};export{is as default};
