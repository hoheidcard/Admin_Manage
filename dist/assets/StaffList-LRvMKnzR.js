import{u as re,s as ce,x as ue,d as m,e as _e,n as me,D as pe,r as u,o as a,c as i,a as t,b as r,w as _,v,p as $,j as f,F as ve,z as fe,f as c,g as I,t as l,y as he,m as L,E as C}from"./index-DwPljJjs.js";const ge={class:"faq-page"},be={class:"container"},ye={class:"table-card card"},Se={class:"table-header"},we={class:"left"},Ie={class:"title-row"},ke={class:"icon"},Ee=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Staff : List"),t("h5",{class:"main-title"},"Our Staff")],-1),Ce={class:"right"},Ve={class:"searchbar"},Me={class:"icon"},De={class:"searchbar"},Pe={class:"select-dropdown"},Ne=t("option",{value:"ACTIVE"},"ACTIVE",-1),Ae=t("option",{value:"PENDING"},"PENDING",-1),Te=t("option",{value:"DEACTIVE"},"DEACTIVE",-1),xe=[Ne,Ae,Te],Ue={class:"icons"},$e=t("div",{class:"tooltip"},"Add Staff",-1),Le={class:"table-body p-16"},Ye={class:"table-outer"},Ge={class:"table"},ze=t("thead",null,[t("th",null,"#"),t("th",null,"Name"),t("th",null,"Phone"),t("th",null,"Dob"),t("th",null,"Designation"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1),Be={key:0,class:"badge success-badge"},Fe={key:1,class:"badge warning-badge"},Re={key:2,class:"badge danger-badge"},He={class:"option-btns"},Ke=["onClick"],qe=t("div",{class:"tooltip"},"Edit",-1),Oe=["onClick"],Ze=t("div",{class:"tooltip"},"Permission",-1),je=["onClick"],Je=t("div",{class:"tooltip"},"Change Status",-1),Qe={key:0,class:"table-no-data"},We=t("div",null,"No records Found!",-1),Xe=[We],et={key:1,class:"table-footer"},tt={class:"title",showHeader:"true"},st={class:"form mb-16"},ot={key:0,class:"form-item mb-16"},nt=t("div",{class:"title"},"Login Id",-1),at={class:"form-item mb-16"},it=t("div",{class:"title"},"Name",-1),lt={key:0,class:"err-msg"},dt={class:"form-item mb-16"},rt=t("div",{class:"title"},"Email",-1),ct={key:0,class:"err-msg"},ut={key:1,class:"form-item mb-16"},_t=t("div",{class:"title"},"Phone",-1),mt={key:0,class:"err-msg"},pt={class:"row"},vt={class:"form-item mb-16 col-5"},ft=t("div",{class:"title"},"Gender",-1),ht={class:"select-dropdown"},gt=t("option",{value:"MALE"},"MALE",-1),bt=t("option",{value:"FEMALE"},"FEMALE",-1),yt=t("option",{value:"OTHER"},"OTHER",-1),St=[gt,bt,yt],wt={key:0,class:"err-msg"},It={class:"form-item mb-16 col-5"},kt=t("div",{class:"title"},"Dob",-1),Et=["max"],Ct={key:0,class:"err-msg"},Vt={class:"form-item mb-16"},Mt=t("div",{class:"title"},"Designation",-1),Dt={key:0,class:"err-msg"},Pt={key:2,class:"form-item mb-16"},Nt=t("div",{class:"title"},"Password",-1),At={key:0,class:"err-msg"},Tt={class:"modal-footer"},xt={class:"btns"},Ut=t("div",{class:"title",showHeader:"true"},"Change Status",-1),$t={class:"status-row"},Lt={for:"approve",class:"data"},Yt={class:"data-inner approve-card"},Gt=t("div",{class:"title"},"ACTIVE",-1),zt={for:"pending",class:"data"},Bt={class:"data-inner pending-card"},Ft=t("div",{class:"title"},"PENDING",-1),Rt={for:"block",class:"data"},Ht={class:"data-inner block-card"},Kt=t("div",{class:"title"},"DEACTIVE",-1),qt={class:"modal-footer"},Ot={class:"btns"},Jt={__name:"StaffList",setup(Zt){const p=re();ce();const Y=ue(),d=m(()=>p.state.Staff),G=m(()=>p.state.Designation),e=_e({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,staffId:null,staffAccountId:null,changeStatus:null,name:null,emailId:null,phoneNumber:null,password:null,gender:"MALE",dob:null,designation:"",designationId:null,searchKey:null});me(()=>{g(),z()}),pe(()=>e.keyword,()=>{clearTimeout(e.typingTimer),e.typingTimer=setTimeout(()=>{e.limit=10,e.offset=0,e.currentPage=1,g()},e.typingDelay)});function g(){p.dispatch("Staff/getMyStaff",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status})}function z(){p.dispatch("Designation/getMyDesignation")}function B(){d.value.staffModal=!0,e.editMode=!1,e.name=null,e.emailId=null,e.dob=null,e.gender="MALE",e.designationId=null,e.designation=""}function F(n){var o;d.value.staffModal=!0,e.editMode=!0,e.staffId=n.id,e.staffAccountId=n.accountId,e.name=n.name,e.emailId=n.emailId,e.dob=n.dob,e.gender=n.gender,e.designationId=n.designationId,e.designation=(o=n.designation)==null?void 0:o.name}function R(n,o){e.changeStatus=o,e.staffAccountId=n,d.value.statusModal=!0}function H(){if(e.editMode){if(h.value||b.value||y.value||S.value||w.value||h.value){e.submit=!0;return}e.submit=!1,p.dispatch("Staff/updateStaff",{id:e.staffAccountId,name:e.name,emailId:e.emailId,gender:e.gender,dob:e.dob,designationId:e.designationId,designationName:e.designation})}else{if(h.value||b.value||y.value||k.value||S.value||w.value||h.value||E.value){e.submit=!0;return}e.submit=!1,p.dispatch("Staff/addStaff",{phoneNumber:e.phoneNumber,password:e.password,name:e.name,emailId:e.emailId,gender:e.gender,dob:e.dob,designationId:e.designationId,designationName:e.designation})}}function K(){p.dispatch("Staff/updateStaffStatus",{id:e.staffAccountId,status:e.changeStatus})}const q=n=>{e.currentPage=n,e.offset=e.limit*(n-1),g()};function O(){g()}const Z=n=>{e.designationId=n.id},j=n=>{e.searchKey=n};function J(n,o){Y.push({path:o,query:{id:n}})}function Q(n){return n?L(n).format("DD.MM.YYYY"):"-"}const b=m(()=>{if(!e.name)return"Please Enter Name"}),y=m(()=>{let n=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(e.emailId){if(!n.test(e.emailId))return"Please Enter Valid Email!"}else return"Please Enter Email!"}),k=m(()=>{let n=/^[6-9][0-9]{9}$/;if(e.phoneNumber){if(!n.test(e.phoneNumber))return"Please Enter Valid Phone Number!"}else return"Please Enter Phone Number!"}),h=m(()=>{if(!e.designationId)return"Please Select Designation"}),S=m(()=>{if(!e.gender)return"Please Select Gender"}),w=m(()=>{if(!e.dob)return"Please Select Date of Birth"}),E=m(()=>{let n=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#$@!%&*?])[A-Za-z\d#$@!%&*?]{8,16}$/;if(e.password){if(!n.test(e.password))return"password must have at least one uppercase and lowercase character,one number and special character!"}else return"Please Enter Password"});function V(n){let o=String.fromCharCode(n.keyCode);if(/^[0-9]+$/.test(o)||n.keyCode===8||n.keyCode===9||n.keyCode===37||n.keyCode===39||n.keyCode>=96&&n.keyCode<=105)return!0;n.preventDefault()}return(n,o)=>{var P,N;const W=u("icon-help"),X=u("icon-search"),ee=u("icon-plus"),te=u("icon-edit"),se=u("icon-permission"),oe=u("icon-setting"),ne=u("Pagination"),M=u("icon-cross"),ae=u("SingleSelect"),D=u("Modal"),ie=u("icon-success"),le=u("icon-warning"),de=u("icon-block");return a(),i("section",ge,[t("div",be,[t("div",ye,[t("div",Se,[t("div",we,[t("div",Ie,[t("div",ke,[r(W)]),Ee])]),t("div",Ce,[t("div",Ve,[_(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>e.keyword=s),placeholder:"Search here"},null,512),[[v,e.keyword]]),t("div",Me,[r(X)])]),t("div",De,[t("div",Pe,[_(t("select",{name:"",id:"","onUpdate:modelValue":o[1]||(o[1]=s=>e.status=s),onChange:O},xe,544),[[$,e.status]])])]),t("div",Ue,[t("div",{class:"icon tooltip-wrapper",onClick:f(B,["prevent"])},[r(ee),$e])])])]),t("div",Le,[t("div",Ye,[t("table",Ge,[ze,t("tbody",null,[(a(!0),i(ve,null,fe(d.value.staffData,(s,A)=>{var T,x;return a(),i("tr",{key:A},[t("td",null,l(A+1),1),t("td",null,l(s.name),1),t("td",null,l((T=s.account)==null?void 0:T.phoneNumber),1),t("td",null,l(Q(s.dob)),1),t("td",null,l((x=s.designation)==null?void 0:x.name),1),t("td",null,[s.status==="ACTIVE"?(a(),i("div",Be,l(s.status),1)):c("",!0),s.status==="PENDING"?(a(),i("div",Fe,l(s.status),1)):c("",!0),s.status==="DEACTIVE"?(a(),i("div",Re,l(s.status),1)):c("",!0)]),t("td",null,[t("div",He,[t("div",{class:"icon tooltip-wrapper",onClick:U=>F(s)},[r(te),qe],8,Ke),t("div",{class:"icon tooltip-wrapper",onClick:f(U=>J(s.accountId,"/crm/staff-permission"),["prevent"])},[r(se),Ze],8,Oe),t("div",{class:"icon tooltip-wrapper",onClick:f(U=>R(s.accountId,s.status),["prevent"])},[r(oe),Je],8,je)])])])}),128))])])]),((P=d.value.staffData)==null?void 0:P.length)<=0?(a(),i("div",Qe,Xe)):c("",!0),((N=d.value.staffData)==null?void 0:N.length)>0?(a(),i("div",et,[r(ne,{currentPage:e.currentPage,totalItem:d.value.totalStaff,itemsPerPage:e.limit,"onUpdate:currentPage":o[2]||(o[2]=s=>q(s))},null,8,["currentPage","totalItem","itemsPerPage"])])):c("",!0)])])]),r(D,{show:d.value.staffModal,"onUpdate:show":o[15]||(o[15]=s=>d.value.staffModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:I(()=>[t("div",tt,l(e.editMode?"Update Staff":"Add Staff"),1),t("div",{class:"close-btn",onClick:o[3]||(o[3]=f(s=>d.value.staffModal=!1,["prevent"]))},[r(M)])]),default:I(()=>[t("form",st,[e.editMode?c("",!0):(a(),i("div",ot,[nt,_(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=s=>e.phoneNumber=s),placeholder:"Enter Phone Number",onKeydown:o[5]||(o[5]=s=>V(s)),maxlength:"10",disabled:""},null,544),[[v,e.phoneNumber]])])),t("div",at,[it,_(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=s=>e.name=s),placeholder:"Enter Name",maxlength:"30"},null,512),[[v,e.name]]),e.submit&&b.value?(a(),i("div",lt,l(b.value),1)):c("",!0)]),t("div",dt,[rt,_(t("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=s=>e.emailId=s),placeholder:"Enter E-mail ",maxlength:"30"},null,512),[[v,e.emailId]]),e.submit&&y.value?(a(),i("div",ct,l(y.value),1)):c("",!0)]),e.editMode?c("",!0):(a(),i("div",ut,[_t,_(t("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=s=>e.phoneNumber=s),placeholder:"Enter Phone Number",onKeydown:o[9]||(o[9]=s=>V(s)),maxlength:"10"},null,544),[[v,e.phoneNumber]]),e.submit&&k.value?(a(),i("div",mt,l(k.value),1)):c("",!0)])),t("div",pt,[t("div",vt,[ft,t("div",ht,[_(t("select",{"onUpdate:modelValue":o[10]||(o[10]=s=>e.gender=s)},St,512),[[$,e.gender]])]),e.submit&&S.value?(a(),i("div",wt,l(S.value),1)):c("",!0)]),t("div",It,[kt,_(t("input",{type:"date","onUpdate:modelValue":o[11]||(o[11]=s=>e.dob=s),max:he(L)().format("YYYY-MM-DD")},null,8,Et),[[v,e.dob]]),e.submit&&w.value?(a(),i("div",Ct,l(w.value),1)):c("",!0)])]),t("div",Vt,[Mt,r(ae,{options:G.value.designationData,onSelected:Z,modelValue:e.designation,"onUpdate:modelValue":o[12]||(o[12]=s=>e.designation=s),placeholder:"Select Designation",onSearch:j},null,8,["options","modelValue"]),e.submit&&h.value?(a(),i("div",Dt,l(h.value),1)):c("",!0)]),e.editMode?c("",!0):(a(),i("div",Pt,[Nt,_(t("input",{type:"password",name:"password","onUpdate:modelValue":o[13]||(o[13]=s=>e.password=s),placeholder:"Enter Password ",maxlength:"30"},null,512),[[v,e.password]]),e.submit&&E.value?(a(),i("div",At,l(E.value),1)):c("",!0)]))]),t("div",Tt,[t("div",xt,[t("div",{class:"btn red-btn",onClick:o[14]||(o[14]=f(s=>d.value.staffModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:H},"Submit")])])]),_:1},8,["show"]),r(D,{show:d.value.statusModal,"onUpdate:show":o[21]||(o[21]=s=>d.value.statusModal=s),class:"status-modal",headerClasses:"header-bg"},{header:I(()=>[Ut,t("div",{class:"close-btn",onClick:o[16]||(o[16]=f(s=>d.value.statusModal=!1,["prevent"]))},[r(M)])]),default:I(()=>[t("div",$t,[t("label",Lt,[_(t("input",{type:"radio","onUpdate:modelValue":o[17]||(o[17]=s=>e.changeStatus=s),value:"ACTIVE",id:"approve",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Yt,[r(ie),Gt])]),t("label",zt,[_(t("input",{type:"radio","onUpdate:modelValue":o[18]||(o[18]=s=>e.changeStatus=s),value:"PENDING",id:"pending",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Bt,[r(le),Ft])]),t("label",Rt,[_(t("input",{type:"radio","onUpdate:modelValue":o[19]||(o[19]=s=>e.changeStatus=s),value:"DEACTIVE",id:"block",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Ht,[r(de),Kt])])]),t("div",qt,[t("div",Ot,[t("div",{class:"btn red-btn",onClick:o[20]||(o[20]=f(s=>d.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:K},"Submit")])])]),_:1},8,["show"])])}}};export{Jt as default};
