import{u as W,s as X,x as Y,d as Z,e as tt,n as st,D as et,r as n,o as a,c as l,a as t,b as i,w as _,v as ot,p as at,F as nt,z as lt,f as c,t as r,q as A,g as h,i as z,j as f,E as S}from"./index-DwPljJjs.js";const it={class:"faq-page"},dt={class:"table-card card"},ct={class:"table-header"},rt={class:"left"},ut={class:"title-row"},_t={class:"icon"},pt=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Students : List"),t("h5",{class:"main-title"},"Our Students")],-1),ht={class:"right"},gt={class:"searchbar"},vt={class:"icon"},mt={class:"searchbar"},ft={class:"select-dropdown"},St=t("option",{value:"ACTIVE"},"ACTIVE",-1),bt=t("option",{value:"PENDING"},"PENDING",-1),yt=t("option",{value:"DEACTIVE"},"DEACTIVE",-1),kt=[St,bt,yt],Ct={class:"table-body p-16"},Dt={class:"table-outer"},Et={class:"table"},It=t("thead",null,[t("th",null,"Image"),t("th",null,"SR No."),t("th",null,"S. Name"),t("th",null,"F. Name"),t("th",null,"Class-Section"),t("th",null,"School"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1),wt={key:0,class:"zoom-image"},Nt=["src"],Tt={class:"text-primary"},Vt={key:0,class:"badge success-badge"},Pt={key:1,class:"badge warning-badge"},Mt={key:2,class:"badge danger-badge"},At={class:"option-btns"},zt=["onClick"],xt=t("div",{class:"tooltip"},"Edit",-1),Lt=["onClick"],Ut=t("div",{class:"tooltip"},"Edit",-1),Ot=["onClick"],qt=t("div",{class:"tooltip"},"Change Status",-1),Gt={key:0,class:"table-no-data"},$t=t("div",null,"No records Found!",-1),Bt=[$t],Ft={key:1,class:"table-footer"},Rt=t("div",{class:"title",showHeader:"true"},"Change Status",-1),Ht={class:"status-row"},jt={for:"approve",class:"data"},Jt={class:"data-inner approve-card"},Kt=t("div",{class:"title"},"ACTIVE",-1),Qt={for:"pending",class:"data"},Wt={class:"data-inner pending-card"},Xt=t("div",{class:"title"},"PENDING",-1),Yt={for:"block",class:"data"},Zt={class:"data-inner block-card"},ts=t("div",{class:"title"},"DEACTIVE",-1),ss={class:"modal-footer"},es={class:"btns"},as={__name:"Students",props:{fromDate:{type:String,default:!0},toDate:{type:String,required:!0},all:{type:String,required:!0}},setup(x){const g=x,v=W();X();const L=Y(),d=Z(()=>v.state.Dashboard),e=tt({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"STUDENT",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,id:null,partnersAccountId:null,changeStatus:null});st(()=>{p()}),et(()=>e.keyword,()=>{clearTimeout(e.typingTimer),e.typingTimer=setTimeout(()=>{e.limit=10,e.offset=0,e.currentPage=1,p()},e.typingDelay)});function p(){v.dispatch("Dashboard/getStudents",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status,fromDate:g.fromDate,toDate:g.toDate,roles:"STUDENT",all:g.all})}function U(u,o){e.changeStatus=o,e.id=u,d.value.statusModal=!0}function O(){v.dispatch("OrganizationStudent/updateStudentStatus",{id:e.id,status:e.changeStatus}),d.value.statusModal=!1}const q=u=>{e.currentPage=u,e.offset=e.limit*(u-1),p()};function G(){p()}function b(u,o,m){L.push({path:m,query:{id:u,settingId:o}})}return(u,o)=>{var C,D;const m=n("icon-partner"),$=n("icon-search"),y=n("router-link"),k=n("icon-edit"),B=n("icon-status"),F=n("Pagination"),R=n("icon-cross"),H=n("icon-success"),j=n("icon-warning"),J=n("icon-block"),K=n("Modal");return a(),l("section",it,[t("div",dt,[t("div",ct,[t("div",rt,[t("div",ut,[t("div",_t,[i(m)]),pt])]),t("div",ht,[t("div",gt,[_(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>e.keyword=s),placeholder:"Search here"},null,512),[[ot,e.keyword]]),t("div",vt,[i($)])]),t("div",mt,[t("div",ft,[_(t("select",{name:"",id:"","onUpdate:modelValue":o[1]||(o[1]=s=>e.status=s),onChange:G},kt,544),[[at,e.status]])])])])]),t("div",Ct,[t("div",Dt,[t("table",Et,[It,t("tbody",null,[(a(!0),l(nt,null,lt(d.value.studentData,(s,Q)=>{var E,I,w,N,T,V,P;return a(),l("tr",{key:Q},[t("td",null,[s.profile?(a(),l("div",wt,[t("img",{src:`${s.profile}?width=200`,alt:""},null,8,Nt)])):c("",!0)]),t("td",null,r(s.srNo),1),t("td",Tt,[((E=s.organizationDetail)==null?void 0:E.account.roles)==="SCHOOL"?(a(),A(y,{key:0,to:{path:"/crm/school/student-profile",query:{studentId:s.id,id:e.organizationId,settingId:e.organizationSettingId}}},{default:h(()=>[z(r(s.name),1)]),_:2},1032,["to"])):c("",!0),((I=s.organizationDetail)==null?void 0:I.account.roles)==="COLLEGE"?(a(),A(y,{key:1,to:{path:"/crm/college/student-profile",query:{studentId:s.id,id:e.organizationId,settingId:e.organizationSettingId}}},{default:h(()=>[z(r(s.name),1)]),_:2},1032,["to"])):c("",!0)]),t("td",null,r(s.fatherName),1),t("td",null,r((w=s.classList)==null?void 0:w.name)+"-"+r((N=s.classDiv)==null?void 0:N.name),1),t("td",null,r((T=s.organizationDetail)==null?void 0:T.name),1),t("td",null,[s.status==="ACTIVE"?(a(),l("div",Vt,r(s.status),1)):c("",!0),s.status==="PENDING"?(a(),l("div",Pt,r(s.status),1)):c("",!0),s.status==="DEACTIVE"?(a(),l("div",Mt,r(s.status),1)):c("",!0)]),t("td",null,[t("div",At,[((V=s.organizationDetail)==null?void 0:V.account.roles)==="SCHOOL"?(a(),l("div",{key:0,class:"icon tooltip-wrapper",onClick:M=>b(s.id,s.settingId,"/crm/school/update-my-student")},[i(k),xt],8,zt)):c("",!0),((P=s.organizationDetail)==null?void 0:P.account.roles)==="COLLEGE"?(a(),l("div",{key:1,class:"icon tooltip-wrapper",onClick:M=>b(s.id,s.settingId,"/crm/college/update-my-student")},[i(k),Ut],8,Lt)):c("",!0),t("div",{class:"icon tooltip-wrapper",onClick:f(M=>U(s.id,s.status),["prevent"])},[i(B),qt],8,Ot)])])])}),128))])])]),((C=d.value.studentData)==null?void 0:C.length)<=0?(a(),l("div",Gt,Bt)):c("",!0),((D=d.value.studentData)==null?void 0:D.length)>0?(a(),l("div",Ft,[i(F,{currentPage:e.currentPage,totalItem:d.value.totalStudent,itemsPerPage:e.limit,"onUpdate:currentPage":o[2]||(o[2]=s=>q(s))},null,8,["currentPage","totalItem","itemsPerPage"])])):c("",!0)])]),i(K,{show:d.value.statusModal,"onUpdate:show":o[8]||(o[8]=s=>d.value.statusModal=s),class:"status-modal",headerClasses:"header-bg"},{header:h(()=>[Rt,t("div",{class:"close-btn",onClick:o[3]||(o[3]=f(s=>d.value.statusModal=!1,["prevent"]))},[i(R)])]),default:h(()=>[t("div",Ht,[t("label",jt,[_(t("input",{type:"radio","onUpdate:modelValue":o[4]||(o[4]=s=>e.changeStatus=s),value:"ACTIVE",id:"approve",name:"status"},null,512),[[S,e.changeStatus]]),t("div",Jt,[i(H),Kt])]),t("label",Qt,[_(t("input",{type:"radio","onUpdate:modelValue":o[5]||(o[5]=s=>e.changeStatus=s),value:"PENDING",id:"pending",name:"status"},null,512),[[S,e.changeStatus]]),t("div",Wt,[i(j),Xt])]),t("label",Yt,[_(t("input",{type:"radio","onUpdate:modelValue":o[6]||(o[6]=s=>e.changeStatus=s),value:"DEACTIVE",id:"block",name:"status"},null,512),[[S,e.changeStatus]]),t("div",Zt,[i(J),ts])])]),t("div",ss,[t("div",es,[t("div",{class:"btn red-btn",onClick:o[7]||(o[7]=f(s=>d.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:O},"Submit")])])]),_:1},8,["show"])])}}};export{as as default};
