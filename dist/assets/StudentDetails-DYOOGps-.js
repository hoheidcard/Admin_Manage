import{k as $,s as B,u as L,d as P,e as G,l as j,n as z,r as u,o as i,c as l,a as s,b as p,i as A,g as w,j as _,f as v,t as e,m as V,M as q}from"./index-DwPljJjs.js";import{_ as f}from"./camera-B4WFWT0E.js";import{C as Y}from"./cropper-DeyK3aZp.js";const T={class:"student-details-page"},H={class:"container flexx jjustify-center"},Z={class:"main-card mid-cardd"},W={class:"card-header"},J={class:"left"},K={class:"icon"},Q={class:"right"},X={class:"icons"},ss={class:"card-body"},ts={class:"row"},es={class:"col-20"},os={class:"img-upload flex flex-d-col align-center"},as=s("div",{class:"text text-small mb-10"},"Student Pic",-1),is=["src"],ls={key:1,src:f,class:"dummy-img",alt:""},ds={key:0,class:"w-100 flex gap-10 pt-10"},cs={class:"col-20"},ns={class:"img-upload flex flex-d-col align-center"},_s=s("div",{class:"text text-small mb-5"},"Father Pic",-1),vs=["src"],rs={key:1,src:f,class:"dummy-img",alt:""},hs={key:0,class:"w-100 flex gap-10 pt-10"},us={class:"col-20"},ps={class:"img-upload flex flex-d-col align-center"},ms=s("div",{class:"text text-small mb-5"},"Mother Pic",-1),gs=["src"],fs={key:1,src:f,class:"dummy-img",alt:""},bs={key:0,class:"w-100 flex gap-10 pt-10"},ys={class:"col-20"},ws={class:"img-upload flex flex-d-col align-center"},Cs=s("div",{class:"text text-small mb-5"},"Guardian Pic",-1),Ns=["src"],ks={key:1,src:f,class:"dummy-img",alt:""},Is={key:0,class:"w-100 flex gap-10 pt-10"},xs=s("br",null,null,-1),Ms={class:"user-profile"},Us={class:"data-list"},Ss={class:"data"},Rs=s("div",{class:"title"},"College :",-1),Ds={class:"val"},Fs={class:"data-list"},Es={class:"data"},Os=s("div",{class:"title"},"Id :",-1),$s={class:"val"},Bs={class:"data"},Ls=s("div",{class:"title"},"Reg. No :",-1),Ps={class:"val"},Gs={class:"data"},js=s("div",{class:"title"},"Admission No. :",-1),zs={class:"val"},As={class:"data"},Vs=s("div",{class:"title"},"UID No. :",-1),qs={class:"val"},Ys={class:"data-list"},Ts={class:"data"},Hs=s("div",{class:"title"},"PEN No :",-1),Zs={class:"val"},Ws={class:"data"},Js=s("div",{class:"title"},"Student. No :",-1),Ks={class:"val"},Qs={class:"data"},Xs=s("div",{class:"title"},"Photo No. :",-1),st={class:"val"},tt={class:"data"},et=s("div",{class:"title"},"Rfid No. :",-1),ot={class:"val"},at={class:"data-list"},it={class:"data"},lt=s("div",{class:"title"},"Roll No :",-1),dt={class:"val"},ct={class:"data"},nt=s("div",{class:"title"},"Name :",-1),_t={class:"val"},vt={class:"data"},rt=s("div",{class:"title"},"Contact No. :",-1),ht={class:"val"},ut={class:"data"},pt=s("div",{class:"title"},"Email id :",-1),mt={class:"val"},gt={class:"data-list"},ft={class:"data"},bt=s("div",{class:"title"},"Alt Contact No :",-1),yt={class:"val"},wt={class:"data"},Ct=s("div",{class:"title"},"Class :",-1),Nt={class:"val"},kt={class:"data"},It=s("div",{class:"title"},"Section :",-1),xt={class:"val"},Mt={class:"data"},Ut=s("div",{class:"title"},"Zone :",-1),St={class:"val"},Rt={class:"data-list"},Dt={class:"data"},Ft=s("div",{class:"title"},"Gender :",-1),Et={class:"val"},Ot={class:"data"},$t=s("div",{class:"title"},"DOB :",-1),Bt={class:"val"},Lt={class:"data"},Pt=s("div",{class:"title"},"Blood Group :",-1),Gt={class:"val"},jt={class:"data"},zt=s("div",{class:"title"},"Aadhar No. :",-1),At={class:"val"},Vt={class:"data-list"},qt={class:"data"},Yt=s("div",{class:"title"},"Cast :",-1),Tt={class:"val"},Ht={class:"data"},Zt=s("div",{class:"title"},"Religion :",-1),Wt={class:"val"},Jt={class:"data"},Kt=s("div",{class:"title"},"Nationality :",-1),Qt={class:"val"},Xt={class:"data"},se=s("div",{class:"title"},"Guardian Relation :",-1),te={class:"val"},ee={class:"data-list"},oe={class:"data"},ae=s("div",{class:"title"},"Guardian Name :",-1),ie={class:"val"},le={class:"data"},de=s("div",{class:"title"},"Guardian Contact No :",-1),ce={class:"val"},ne={class:"data"},_e=s("div",{class:"title"},"Father Name :",-1),ve={class:"val"},re={class:"data"},he=s("div",{class:"title"},"Father Contact No :",-1),ue={class:"val"},pe={class:"data-list"},me={class:"data"},ge=s("div",{class:"title"},"Mother Name :",-1),fe={class:"val"},be={class:"data"},ye=s("div",{class:"title"},"Mother Contact No :",-1),we={class:"val"},Ce={class:"data"},Ne=s("div",{class:"title"},"Stream :",-1),ke={class:"val"},Ie={class:"data"},xe=s("div",{class:"title"},"Transport :",-1),Me={class:"val"},Ue={class:"data-list"},Se={class:"data"},Re=s("div",{class:"title"},"Conteen :",-1),De={class:"val"},Fe={class:"data"},Ee=s("div",{class:"title"},"Library :",-1),Oe={class:"val"},$e={class:"data"},Be=s("div",{class:"title"},"Hostel :",-1),Le={class:"val"},Pe={class:"data"},Ge=s("div",{class:"title"},"City :",-1),je={class:"val"},ze={class:"data-list"},Ae={class:"data"},Ve=s("div",{class:"title"},"State :",-1),qe={class:"val"},Ye={class:"data"},Te=s("div",{class:"title"},"Pincode :",-1),He={class:"val"},Ze={class:"data"},We=s("div",{class:"title"},"Address :",-1),Je={class:"val"},Ke=s("div",{class:"title",showHeader:"true"},"Upload Image",-1),Qe={class:"image-upload-crop"},Xe={key:0},so=["src"],to=s("br",null,null,-1),eo=s("br",null,null,-1),oo={key:1},ao=["src"],io={class:"modal-footer"},lo={class:"btns"},ro={__name:"StudentDetails",setup(co){const C=$(null),b=B(),r=L(),t=P(()=>r.state.OrganizationStudent),o=G({cropModal:!1,imageUrl:null,imageFile:null,croppedImageUrl:null,cropper:null,cropperEnable:!1,type:""}),U=()=>{o.cropper&&o.cropper.destroy(),o.cropperEnable=!1},S=()=>{o.cropper&&o.cropper.destroy(),o.cropperEnable=!0;const d=C.value;o.cropper=new Y(d,{aspectRatio:35/45,viewMode:1})},R=d=>{o.imageFile=d.target.files[0],o.imageFile&&o.imageFile.type.startsWith("image/")&&(o.imageUrl=URL.createObjectURL(o.imageFile))},D=()=>{const d=o.cropper.getCroppedCanvas();o.croppedImageUrl=d.toDataURL()};j(()=>{o.cropper&&o.cropper.destroy()}),z(()=>{r.dispatch("OrganizationStudent/getOneStudent",{id:b.query.studentId})});async function F(){if(!o.cropperEnable)r.dispatch("OrganizationStudent/updateStudentImage",{id:t.value.id,type:o.type,orgId:b.query.id,file:o.imageFile});else{const d=o.cropper.getCroppedCanvas(),a=await new Promise(n=>d.toBlob(n)),h=new File([a],"cropped-image.png",{type:"image/png"});r.dispatch("OrganizationStudent/updateStudentImage",{id:t.value.id,type:o.type,orgId:b.query.id,file:h})}o.cropModal=!1}function m(d){o.type=d,o.cropModal=!0}function E(d){return d?V(d).format("DD.MM.YYYY"):"-"}const g=async d=>{r.dispatch("Alert/success",{msg:"Downloading image"});const a=await q.get("https://service.abhitprints.in:3111/api/v1/card-orders/download-image?image="+d,{responseType:"blob"}),h=new Blob([a.data]),n=document.createElement("a");n.href=window.URL.createObjectURL(h);const y=d.substring(d.lastIndexOf("/")+1).replace(".webp",".jpg");n.setAttribute("download",y),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(n.href)};return(d,a)=>{var k,I,x,M;const h=u("icon-student"),n=u("icon-edit"),N=u("router-link"),y=u("icon-cross"),O=u("Modal");return i(),l("div",T,[s("div",H,[s("div",Z,[s("div",W,[s("div",J,[s("div",K,[p(h)]),A(" Student Information ")]),s("div",Q,[s("div",X,[p(N,{class:"icon",to:{path:"/crm/college/update-my-student",query:{id:t.value.id,settingId:t.value.settingId}}},{default:w(()=>[p(n)]),_:1},8,["to"])])])]),s("div",ss,[s("div",ts,[s("div",es,[s("div",os,[as,s("div",{class:"img-upload-wrapper h-10-r w-10-r",onClick:a[0]||(a[0]=c=>m("Student"))},[t.value.profile?(i(),l("img",{key:0,src:t.value.profile,class:"preview-image",alt:""},null,8,is)):(i(),l("img",ls))]),t.value.profile?(i(),l("div",ds,[s("button",{class:"btn white-btn w-full",onClick:a[1]||(a[1]=_(c=>g(t.value.profile),["prevent"])),type:"button"}," Download ")])):v("",!0)])]),s("div",cs,[s("div",ns,[_s,s("div",{class:"img-upload-wrapper h-10-r w-10-r",onClick:a[2]||(a[2]=c=>m("Father"))},[t.value.fatherImage?(i(),l("img",{key:0,src:t.value.fatherImage,class:"preview-image",alt:""},null,8,vs)):(i(),l("img",rs))]),t.value.fatherImage?(i(),l("div",hs,[s("button",{class:"btn white-btn w-full",onClick:a[3]||(a[3]=_(c=>g(t.value.fatherImage),["prevent"])),type:"button"}," Download ")])):v("",!0)])]),s("div",us,[s("div",ps,[ms,s("div",{class:"img-upload-wrapper h-10-r w-10-r",onClick:a[4]||(a[4]=c=>m("Mother"))},[t.value.motherImage?(i(),l("img",{key:0,src:t.value.motherImage,class:"preview-image",alt:""},null,8,gs)):(i(),l("img",fs))]),t.value.motherImage?(i(),l("div",bs,[s("button",{class:"btn white-btn w-full",onClick:a[5]||(a[5]=_(c=>g(t.value.motherImage),["prevent"])),type:"button"}," Download ")])):v("",!0)])]),s("div",ys,[s("div",ws,[Cs,s("div",{class:"img-upload-wrapper h-10-r w-10-r",onClick:a[6]||(a[6]=c=>m("Guardian"))},[t.value.guardianImage?(i(),l("img",{key:0,src:t.value.guardianImage,class:"preview-image",alt:""},null,8,Ns)):(i(),l("img",ks))]),t.value.guardianImage?(i(),l("div",Is,[s("button",{class:"btn white-btn w-full",onClick:a[7]||(a[7]=_(c=>g(t.value.guardianImage),["prevent"])),type:"button"}," Download ")])):v("",!0)])])]),xs,s("div",Ms,[s("div",Us,[s("div",Ss,[Rs,s("div",Ds,e((k=t.value.organizationDetail)==null?void 0:k.name),1)])]),s("div",Fs,[s("div",Es,[Os,s("div",$s,e(t.value.id),1)]),s("div",Bs,[Ls,s("div",Ps,e(t.value.regNo),1)]),s("div",Gs,[js,s("div",zs,e(t.value.admissionNo),1)]),s("div",As,[Vs,s("div",qs,e(t.value.admissionNo),1)])]),s("div",Ys,[s("div",Ts,[Hs,s("div",Zs,e(t.value.PEN),1)]),s("div",Ws,[Js,s("div",Ks,e(t.value.studentNo),1)]),s("div",Qs,[Xs,s("div",st,e(t.value.photoNumber),1)]),s("div",tt,[et,s("div",ot,e(t.value.rfidNo),1)])]),s("div",at,[s("div",it,[lt,s("div",dt,e(t.value.rollNo>0?t.value.rollNo:""),1)]),s("div",ct,[nt,s("div",_t,e(t.value.name),1)]),s("div",vt,[rt,s("div",ht,e(t.value.contactNo),1)]),s("div",ut,[pt,s("div",mt,e(t.value.emailId),1)])]),s("div",gt,[s("div",ft,[bt,s("div",yt,e(t.value.altContactNo),1)]),s("div",wt,[Ct,s("div",Nt,e((I=t.value.classList)==null?void 0:I.name),1)]),s("div",kt,[It,s("div",xt,e((x=t.value.classDiv)==null?void 0:x.name),1)]),s("div",Mt,[Ut,s("div",St,e((M=t.value.houseZone)==null?void 0:M.name),1)])]),s("div",Rt,[s("div",Dt,[Ft,s("div",Et,e(t.value.gender),1)]),s("div",Ot,[$t,s("div",Bt,e(E(t.value.dob)),1)]),s("div",Lt,[Pt,s("div",Gt,e(t.value.bloodGroup),1)]),s("div",jt,[zt,s("div",At,e(t.value.aadharNumber),1)])]),s("div",Vt,[s("div",qt,[Yt,s("div",Tt,e(t.value.cast),1)]),s("div",Ht,[Zt,s("div",Wt,e(t.value.relation),1)]),s("div",Jt,[Kt,s("div",Qt,e(t.value.nationality),1)]),s("div",Xt,[se,s("div",te,e(t.value.guardianRelation),1)])]),s("div",ee,[s("div",oe,[ae,s("div",ie,e(t.value.guardianName),1)]),s("div",le,[de,s("div",ce,e(t.value.guardianContactNo),1)]),s("div",ne,[_e,s("div",ve,e(t.value.fatherName),1)]),s("div",re,[he,s("div",ue,e(t.value.fatherContactNo),1)])]),s("div",pe,[s("div",me,[ge,s("div",fe,e(t.value.motherName),1)]),s("div",be,[ye,s("div",we,e(t.value.motherContactNo),1)]),s("div",Ce,[Ne,s("div",ke,e(t.value.stream),1)]),s("div",Ie,[xe,s("div",Me,e(t.value.transport),1)])]),s("div",Ue,[s("div",Se,[Re,s("div",De,e(t.value.canteen),1)]),s("div",Fe,[Ee,s("div",Oe,e(t.value.library),1)]),s("div",$e,[Be,s("div",Le,e(t.value.hostel),1)]),s("div",Pe,[Ge,s("div",je,e(t.value.city),1)])]),s("div",ze,[s("div",Ae,[Ve,s("div",qe,e(t.value.state),1)]),s("div",Ye,[Te,s("div",He,e(t.value.pincode),1)]),s("div",Ze,[We,s("div",Je,e(t.value.address),1)])])])])])]),p(O,{show:o.cropModal,"onUpdate:show":a[10]||(a[10]=c=>o.cropModal=c),class:"status-modal",headerClasses:"header-bg"},{header:w(()=>[Ke,s("div",{class:"close-btn",onClick:a[8]||(a[8]=_(c=>o.cropModal=!1,["prevent"]))},[p(y)])]),default:w(()=>[s("div",Qe,[s("input",{type:"file",onChange:R},null,32),o.imageUrl?(i(),l("div",Xe,[s("img",{ref_key:"imageRef",ref:C,src:o.imageUrl,alt:"Source Image",style:{"max-width":"100%"}},null,8,so),to,o.cropperEnable?(i(),l("button",{key:0,type:"button",class:"btn green-btn",onClick:D}," Crop Image ")):v("",!0),eo])):v("",!0),o.croppedImageUrl?(i(),l("div",oo,[s("img",{src:o.croppedImageUrl,alt:"Cropped Image",style:{"max-width":"100%",height:"150px"}},null,8,ao)])):v("",!0)]),s("div",io,[s("div",lo,[s("div",{class:"btn red-btn",onClick:a[9]||(a[9]=_(c=>o.cropModal=!1,["prevent"]))}," Cancel "),o.cropperEnable?(i(),l("div",{key:1,class:"btn green-btn",onClick:_(U,["prevent"])}," Crop ")):(i(),l("div",{key:0,class:"btn green-btn",onClick:_(S,["prevent"])}," Crop ")),s("div",{class:"btn white-btn",onClick:F},"Upload")])])]),_:1},8,["show"])])}}};export{ro as default};
