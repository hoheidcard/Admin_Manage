import{u as y,d,e as x,r as k,o as l,c as i,a as t,w as c,v as m,t as p,f as n,b as C,g as V,h as N,i as h}from"./index-DwPljJjs.js";import{_ as S}from"./logo-Bn_1feJI.js";const O={class:"login-inner-card"},E=t("div",{class:"logo"},[t("img",{src:S,alt:""})],-1),T={class:"card"},U={action:"",class:"form"},A=N('<div class="login-heading"><h3>Forgot password</h3></div><ul><li class="data-text"> Usernames are in the form of an <span class="text-primary">phone number</span>. </li><li class="data-text">Passwords are case sensitive.</li><li class="data-text"> Enter your <span class="text-primary">username</span> . </li><li class="data-text"> To reset your password, enter your phone number. </li></ul>',2),D={key:0,class:"u-name"},Y={class:"form-item mb-16"},B=t("div",{class:"title text-white"},"Username",-1),I={key:0,class:"err-msg"},R={key:0,class:"otp"},F={class:"form-item mb-16"},M=t("div",{class:"title text-white"},"OTP",-1),j={key:0,class:"err-msg"},K={class:"remember-row flex align-center justify-end gap-16 mb-16"},L={key:1},$={class:"pass"},q=t("ul",null,[t("li",{class:"data-text"},[h(" Password must contain atleast : "),t("span",{class:"text-primary"},"8 characters, 1 letter, 1 number"),h(" . ")])],-1),z={class:"form-item mb-16"},G=t("div",{class:"title"},"New Password",-1),H={key:0,class:"err-msg"},J={class:"form-item mb-16"},Q=t("div",{class:"title"},"Confirm Password",-1),W={key:0,class:"err-msg"},X=t("button",{class:"btn white-btn w-50"},"Cancel",-1),es={__name:"Forgot",setup(Z){const u=y(),a=d(()=>u.state.Auth),s=x({submit:!1,loginId:null,password:null,cPassword:null,userName:null,otp:null}),b=o=>{if(o.preventDefault(),!a.value.forgotPasswordStatus&&!a.value.forgotOtpStatus){if(f.value){s.submit=!0;return}s.submit=!1,u.dispatch("Auth/forgotPassword",{loginId:s.userName,roles:"ROOT"})}else if(!a.value.forgotPasswordStatus&&a.value.forgotOtpStatus){if(v.value){s.submit=!0;return}s.submit=!1,u.dispatch("Auth/forgotVerifyOtp",{loginId:s.userName,otp:s.otp,roles:"ROOT"})}else if(a.value.forgotPasswordStatus&&!a.value.forgotOtpStatus){if(w.value||_.value){s.submit=!0;return}s.submit=!1,u.dispatch("Auth/resetPassword",{id:a.value.id,password:s.password,confirmPassword:s.cPassword})}},f=d(()=>{if(!s.userName)return"Please Enter Your Username"}),v=d(()=>{if(!s.otp)return"Please Enter Your OTP"}),w=d(()=>{if(!s.password)return"Please Enter Your Password"}),_=d(()=>{if(s.cPassword){if(s.password!==s.cPassword)return"Password and Confirm Password are not Match"}else return"Please Enter Your Password"});function g(o){let e=String.fromCharCode(o.keyCode);if(/^[0-9]+$/.test(e)||o.keyCode===8||o.keyCode===9||o.keyCode===37||o.keyCode===39||o.keyCode>=96&&o.keyCode<=105)return!0;o.preventDefault()}return(o,e)=>{const P=k("router-link");return l(),i("div",O,[E,t("div",T,[t("form",U,[A,a.value.forgotPasswordStatus?n("",!0):(l(),i("div",D,[t("div",Y,[B,c(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>s.userName=r),placeholder:"Enter Username",maxlength:"30"},null,512),[[m,s.userName]]),s.submit&&f.value?(l(),i("div",I,p(f.value),1)):n("",!0)]),a.value.forgotOtpStatus?(l(),i("div",R,[t("div",F,[M,c(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=r=>s.otp=r),placeholder:"Enter OTP",maxlength:"4",onKeydown:e[2]||(e[2]=r=>g(r))},null,544),[[m,s.otp]]),s.submit&&v.value?(l(),i("div",j,p(v.value),1)):n("",!0)])])):n("",!0),t("div",K,[C(P,{to:"/login",class:"text-small text-primary f-w-bold"},{default:V(()=>[h("Remember Password?")]),_:1})])])),a.value.forgotPasswordStatus?(l(),i("div",L,[t("div",$,[q,t("div",z,[G,c(t("input",{type:"password",name:"password","onUpdate:modelValue":e[3]||(e[3]=r=>s.password=r),placeholder:"Enter New Password"},null,512),[[m,s.password]]),s.submit&&w.value?(l(),i("div",H,p(w.value),1)):n("",!0)]),t("div",J,[Q,c(t("input",{type:"password",name:"confirmPassword","onUpdate:modelValue":e[4]||(e[4]=r=>s.cPassword=r),placeholder:"Enter Confirm Password"},null,512),[[m,s.cPassword]]),s.submit&&_.value?(l(),i("div",W,p(_.value),1)):n("",!0)])])])):n("",!0),t("div",{class:"submit-btn flex gap-16"},[X,t("button",{type:"button",class:"btn primary-btn w-50",onClick:b}," Continue ")])])])])}}};export{es as default};
