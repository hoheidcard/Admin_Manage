import{u as ie,s as le,x as de,d as _,e as re,n as ue,D as L,r as c,o as a,c as i,a as t,b as r,w as m,v as p,p as G,j as v,F as ce,z as me,f as u,g as E,t as l,y as _e,m as Y,E as C}from"./index-DwPljJjs.js";const pe={class:"faq-page"},ve={class:"container"},he={class:"table-card card"},fe={class:"table-header"},be={class:"left"},ge={class:"title-row"},ye={class:"icon"},we=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Admin : List"),t("h5",{class:"main-title"},"Our Admin")],-1),Ee={class:"right"},ke={class:"searchbar"},Ae={class:"icon"},Ce={class:"searchbar"},Ie={class:"select-dropdown"},Me=t("option",{value:"ACTIVE"},"ACTIVE",-1),De=t("option",{value:"PENDING"},"PENDING",-1),Ve=t("option",{value:"DEACTIVE"},"DEACTIVE",-1),Pe=[Me,De,Ve],Ne={class:"icons"},Se=t("div",{class:"tooltip"},"Add Admin",-1),Te={class:"table-body p-16"},xe={class:"table-outer"},Ue={class:"table"},$e=t("thead",null,[t("th",null,"#"),t("th",null,"Name"),t("th",null,"Email"),t("th",null,"Phone"),t("th",null,"Gender"),t("th",null,"Dob"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1),Le={key:0,class:"badge success-badge"},Ge={key:1,class:"badge warning-badge"},Ye={key:2,class:"badge danger-badge"},ze={class:"option-btns"},Be=["onClick"],Fe=t("div",{class:"tooltip"},"Edit",-1),Ke=["onClick"],Re=t("div",{class:"tooltip"},"Permission",-1),He=["onClick"],qe=t("div",{class:"tooltip"},"Change Status",-1),Oe={key:0,class:"table-no-data"},Ze=t("div",null,"No records Found!",-1),je=[Ze],Je={key:1,class:"table-footer"},Qe={class:"title",showHeader:"true"},We={class:"form mb-16"},Xe={key:0,class:"form-item mb-16"},et=t("div",{class:"title"},"Login Id",-1),tt={class:"form-item mb-16"},st=t("div",{class:"title"},"Name",-1),ot={key:0,class:"err-msg"},nt={class:"form-item mb-16"},at=t("div",{class:"title"},"Email",-1),it={key:0,class:"err-msg"},lt={key:1,class:"form-item mb-16"},dt=t("div",{class:"title"},"Phone",-1),rt={key:0,class:"err-msg"},ut={class:"row"},ct={class:"form-item mb-16 col-5"},mt=t("div",{class:"title"},"Gender",-1),_t={class:"select-dropdown"},pt=t("option",{value:"MALE"},"MALE",-1),vt=t("option",{value:"FEMALE"},"FEMALE",-1),ht=t("option",{value:"OTHER"},"OTHER",-1),ft=[pt,vt,ht],bt={key:0,class:"err-msg"},gt={class:"form-item mb-16 col-5"},yt=t("div",{class:"title"},"Dob",-1),wt=["max"],Et={key:0,class:"err-msg"},kt={key:2,class:"form-item mb-16"},At=t("div",{class:"title"},"Password",-1),Ct={key:0,class:"err-msg"},It={class:"modal-footer"},Mt={class:"btns"},Dt=t("div",{class:"title",showHeader:"true"},"Change Status",-1),Vt={class:"status-row"},Pt={for:"approve",class:"data"},Nt={class:"data-inner approve-card"},St=t("div",{class:"title"},"ACTIVE",-1),Tt={for:"pending",class:"data"},xt={class:"data-inner pending-card"},Ut=t("div",{class:"title"},"PENDING",-1),$t={for:"block",class:"data"},Lt={class:"data-inner block-card"},Gt=t("div",{class:"title"},"DEACTIVE",-1),Yt={class:"modal-footer"},zt={class:"btns"},Kt={__name:"AdminList",setup(Bt){const h=ie();le();const z=de(),d=_(()=>h.state.Admin),e=re({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"ADMIN",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,staffId:null,staffAccountId:null,changeStatus:null,name:null,emailId:null,phoneNumber:null,password:null,gender:"MALE",dob:null,designation:"",designationId:null,searchKey:null});ue(()=>{f()}),L(()=>e.keyword,()=>{clearTimeout(e.typingTimer),e.typingTimer=setTimeout(()=>{e.limit=10,e.offset=0,e.currentPage=1,f()},e.typingDelay)}),L(()=>e.searchKey,()=>{clearTimeout(e.typingTimer),e.typingTimer=setTimeout(()=>{h.dispatch("Designation/getDesignation",{limit:10,offset:0,keyword:e.searchKey})},e.typingDelay)});function f(){h.dispatch("Admin/getAdmin",{limit:e.limit,offset:e.offset,keyword:e.keyword,status:e.status})}function B(){d.value.adminModal=!0,e.editMode=!1,e.name=null,e.emailId=null,e.dob=null,e.gender="MALE",e.designationId=null,e.designation=""}function F(n){d.value.adminModal=!0,e.editMode=!0,e.staffId=n.staffDetail.id,e.staffAccountId=n.id,e.name=n.staffDetail.name,e.emailId=n.staffDetail.emailId,e.dob=n.staffDetail.dob,e.gender=n.staffDetail.gender}function K(n,o){e.changeStatus=o,e.staffAccountId=n,d.value.statusModal=!0}function R(){if(e.editMode){if(b.value||g.value||y.value||w.value){e.submit=!0;return}e.submit=!1,h.dispatch("Admin/updateAdmin",{id:e.staffAccountId,name:e.name,emailId:e.emailId,gender:e.gender,dob:e.dob,roles:e.roles})}else{if(b.value||g.value||k.value||y.value||w.value||A.value){e.submit=!0;return}e.submit=!1,h.dispatch("Admin/addAdmin",{phoneNumber:e.phoneNumber,password:e.password,name:e.name,emailId:e.emailId,gender:e.gender,dob:e.dob,roles:e.roles})}}function H(){h.dispatch("Admin/updateAdminStatus",{id:e.staffAccountId,status:e.changeStatus})}const q=n=>{e.currentPage=n,e.offset=e.limit*(n-1),f()};function O(){f()}function Z(n,o){z.push({path:o,query:{id:n}})}function j(n){return n?Y(n).format("MMM Do YYYY"):"-"}const b=_(()=>{if(!e.name)return"Please Enter Name"}),g=_(()=>{let n=/^([a-z0-9.-]+)@([a-z]{4,12}).([a-z.]{2,20})$/;if(e.emailId){if(!n.test(e.emailId))return"Please Enter Valid Email!"}else return"Please Enter Email!"}),k=_(()=>{let n=/^[6-9][0-9]{9}$/;if(e.phoneNumber){if(!n.test(e.phoneNumber))return"Please Enter Valid Phone Number!"}else return"Please Enter Phone Number!"});_(()=>{if(!e.designationId)return"Please Select Designation"});const y=_(()=>{if(!e.gender)return"Please Select Gender"}),w=_(()=>{if(!e.dob)return"Please Select Date of Birth"}),A=_(()=>{let n=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#$@!%&*?])[A-Za-z\d#$@!%&*?]{8,16}$/;if(e.password){if(!n.test(e.password))return"password must have at least one uppercase and lowercase character,one number and special character!"}else return"Please Enter Password"});function I(n){let o=String.fromCharCode(n.keyCode);if(/^[0-9]+$/.test(o)||n.keyCode===8||n.keyCode===9||n.keyCode===37||n.keyCode===39||n.keyCode>=96&&n.keyCode<=105)return!0;n.preventDefault()}return(n,o)=>{var V,P;const J=c("icon-admin"),Q=c("icon-search"),W=c("icon-plus"),X=c("icon-edit"),ee=c("icon-permission"),te=c("icon-status"),se=c("Pagination"),M=c("icon-cross"),D=c("Modal"),oe=c("icon-success"),ne=c("icon-warning"),ae=c("icon-block");return a(),i("section",pe,[t("div",ve,[t("div",he,[t("div",fe,[t("div",be,[t("div",ge,[t("div",ye,[r(J)]),we])]),t("div",Ee,[t("div",ke,[m(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>e.keyword=s),placeholder:"Search here"},null,512),[[p,e.keyword]]),t("div",Ae,[r(Q)])]),t("div",Ce,[t("div",Ie,[m(t("select",{name:"",id:"","onUpdate:modelValue":o[1]||(o[1]=s=>e.status=s),onChange:O},Pe,544),[[G,e.status]])])]),t("div",Ne,[t("div",{class:"icon tooltip-wrapper",onClick:v(B,["prevent"])},[r(W),Se])])])]),t("div",Te,[t("div",xe,[t("table",Ue,[$e,t("tbody",null,[(a(!0),i(ce,null,me(d.value.adminData,(s,N)=>{var S,T,x,U;return a(),i("tr",{key:N},[t("td",null,l(N+1),1),t("td",null,l((S=s.staffDetail)==null?void 0:S.name),1),t("td",null,l((T=s.staffDetail)==null?void 0:T.emailId),1),t("td",null,l(s.phoneNumber),1),t("td",null,l((x=s.staffDetail)==null?void 0:x.gender),1),t("td",null,l(j((U=s.staffDetail)==null?void 0:U.dob)),1),t("td",null,[s.status==="ACTIVE"?(a(),i("div",Le,l(s.status),1)):u("",!0),s.status==="PENDING"?(a(),i("div",Ge,l(s.status),1)):u("",!0),s.status==="DEACTIVE"?(a(),i("div",Ye,l(s.status),1)):u("",!0)]),t("td",null,[t("div",ze,[t("div",{class:"icon tooltip-wrapper",onClick:$=>F(s)},[r(X),Fe],8,Be),t("div",{class:"icon tooltip-wrapper",onClick:v($=>Z(s.id,"/crm/admin-permission"),["prevent"])},[r(ee),Re],8,Ke),t("div",{class:"icon tooltip-wrapper",onClick:v($=>K(s.id,s.status),["prevent"])},[r(te),qe],8,He)])])])}),128))])])]),((V=d.value.adminData)==null?void 0:V.length)<=0?(a(),i("div",Oe,je)):u("",!0),((P=d.value.adminData)==null?void 0:P.length)>0?(a(),i("div",Je,[r(se,{currentPage:e.currentPage,totalItem:d.value.totalAdmin,itemsPerPage:e.limit,"onUpdate:currentPage":o[2]||(o[2]=s=>q(s))},null,8,["currentPage","totalItem","itemsPerPage"])])):u("",!0)])])]),r(D,{show:d.value.adminModal,"onUpdate:show":o[14]||(o[14]=s=>d.value.adminModal=s),class:"faq-modal",headerClasses:"header-bg"},{header:E(()=>[t("div",Qe,l(e.editMode?"Update Admin":"Add Admin"),1),t("div",{class:"close-btn",onClick:o[3]||(o[3]=v(s=>d.value.adminModal=!1,["prevent"]))},[r(M)])]),default:E(()=>[t("form",We,[e.editMode?u("",!0):(a(),i("div",Xe,[et,m(t("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=s=>e.phoneNumber=s),placeholder:"Enter Phone Number",onKeydown:o[5]||(o[5]=s=>I(s)),maxlength:"10",disabled:""},null,544),[[p,e.phoneNumber]])])),t("div",tt,[st,m(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=s=>e.name=s),placeholder:"Enter Name",maxlength:"30"},null,512),[[p,e.name]]),e.submit&&b.value?(a(),i("div",ot,l(b.value),1)):u("",!0)]),t("div",nt,[at,m(t("input",{type:"text","onUpdate:modelValue":o[7]||(o[7]=s=>e.emailId=s),placeholder:"Enter E-mail ",maxlength:"30"},null,512),[[p,e.emailId]]),e.submit&&g.value?(a(),i("div",it,l(g.value),1)):u("",!0)]),e.editMode?u("",!0):(a(),i("div",lt,[dt,m(t("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=s=>e.phoneNumber=s),placeholder:"Enter Phone Number",onKeydown:o[9]||(o[9]=s=>I(s)),maxlength:"10"},null,544),[[p,e.phoneNumber]]),e.submit&&k.value?(a(),i("div",rt,l(k.value),1)):u("",!0)])),t("div",ut,[t("div",ct,[mt,t("div",_t,[m(t("select",{name:"",id:"","onUpdate:modelValue":o[10]||(o[10]=s=>e.gender=s)},ft,512),[[G,e.gender]])]),e.submit&&y.value?(a(),i("div",bt,l(y.value),1)):u("",!0)]),t("div",gt,[yt,m(t("input",{type:"date","onUpdate:modelValue":o[11]||(o[11]=s=>e.dob=s),max:_e(Y)().format("YYYY-MM-DD")},null,8,wt),[[p,e.dob]]),e.submit&&w.value?(a(),i("div",Et,l(w.value),1)):u("",!0)])]),e.editMode?u("",!0):(a(),i("div",kt,[At,m(t("input",{type:"password",name:"password","onUpdate:modelValue":o[12]||(o[12]=s=>e.password=s),placeholder:"Enter Password ",maxlength:"30"},null,512),[[p,e.password]]),e.submit&&A.value?(a(),i("div",Ct,l(A.value),1)):u("",!0)]))]),t("div",It,[t("div",Mt,[t("div",{class:"btn red-btn",onClick:o[13]||(o[13]=v(s=>d.value.adminModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:R},"Submit")])])]),_:1},8,["show"]),r(D,{show:d.value.statusModal,"onUpdate:show":o[20]||(o[20]=s=>d.value.statusModal=s),class:"status-modal",headerClasses:"header-bg"},{header:E(()=>[Dt,t("div",{class:"close-btn",onClick:o[15]||(o[15]=v(s=>d.value.statusModal=!1,["prevent"]))},[r(M)])]),default:E(()=>[t("div",Vt,[t("label",Pt,[m(t("input",{type:"radio","onUpdate:modelValue":o[16]||(o[16]=s=>e.changeStatus=s),value:"ACTIVE",id:"approve",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Nt,[r(oe),St])]),t("label",Tt,[m(t("input",{type:"radio","onUpdate:modelValue":o[17]||(o[17]=s=>e.changeStatus=s),value:"PENDING",id:"pending",name:"status"},null,512),[[C,e.changeStatus]]),t("div",xt,[r(ne),Ut])]),t("label",$t,[m(t("input",{type:"radio","onUpdate:modelValue":o[18]||(o[18]=s=>e.changeStatus=s),value:"DEACTIVE",id:"block",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Lt,[r(ae),Gt])])]),t("div",Yt,[t("div",zt,[t("div",{class:"btn red-btn",onClick:o[19]||(o[19]=v(s=>d.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:H},"Submit")])])]),_:1},8,["show"])])}}};export{Kt as default};
