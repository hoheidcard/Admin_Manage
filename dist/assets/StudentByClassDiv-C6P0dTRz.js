import{u as j,s as J,x as K,d as Q,e as W,n as X,D as Y,r as i,o as l,c,a as t,b as n,w as y,v as Z,j as r,F as tt,z as st,f as p,g as u,t as _,i as ot,E as C}from"./index-DwPljJjs.js";const et={class:"faq-page"},nt={class:"container"},at={class:"table-card card"},it={class:"table-header"},dt={class:"left"},lt={class:"title-row"},ct={class:"icon"},rt=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Student : List"),t("h5",{class:"main-title"},"Student")],-1),ut={class:"right"},pt={class:"searchbar"},_t={class:"icon"},ht={class:"icons"},vt=t("div",{class:"tooltip"},"Card",-1),gt={class:"icons"},mt=t("div",{class:"tooltip"},"Add Student",-1),bt={class:"icons"},yt=t("div",{class:"tooltip"},"Promote Class",-1),ft={class:"table-body p-16"},St={class:"table-outer"},Ct={class:"table"},It=t("thead",null,[t("th"),t("th",null,"Card"),t("th",null,"Image"),t("th",null,"SR No."),t("th",null,"S. Name"),t("th",null,"F. Name"),t("th",null,"Class-Section"),t("th",null,"School"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1),kt=["onChange"],wt={key:0},Mt={key:1},Dt={key:2},zt={key:3},Vt={key:0,class:"zoom-image"},Et=["src"],Nt={class:"text-primary"},Tt={key:0,class:"badge success-badge"},At={key:1,class:"badge warning-badge"},Pt={key:2,class:"badge danger-badge"},$t={class:"option-btns"},qt=["onClick"],xt=t("div",{class:"tooltip"},"Edit",-1),Lt=t("div",{class:"tooltip"},"Student",-1),Ut=t("div",{class:"tooltip"},"Parent",-1),Bt=t("div",{class:"tooltip"},"House",-1),Ot=["onClick"],Rt=t("div",{class:"tooltip"},"Change Status",-1),Ht={key:0,class:"table-no-data"},Ft=t("div",null,"No records Found!",-1),Gt=[Ft],jt=t("div",{class:"title",showHeader:"true"},"Change Status",-1),Jt={class:"status-row"},Kt={for:"approve",class:"data"},Qt={class:"data-inner approve-card"},Wt=t("div",{class:"title"},"ACTIVE",-1),Xt={for:"pending",class:"data"},Yt={class:"data-inner pending-card"},Zt=t("div",{class:"title"},"PENDING",-1),ts={for:"block",class:"data"},ss={class:"data-inner block-card"},os=t("div",{class:"title"},"DEACTIVE",-1),es={class:"modal-footer"},ns={class:"btns"},as=t("div",{class:"title",showHeader:"true"}," Are you sure you want to submit? ",-1),is={class:"modal-footer"},ds={class:"btns"},ls=t("div",{class:"title",showHeader:"true"}," Are you sure you want to submit? ",-1),cs={class:"modal-footer"},rs={class:"btns"},_s={__name:"StudentByClassDiv",setup(us){const h=j(),v=J(),E=K(),a=Q(()=>h.state.OrganizationStudent),e=W({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,studentId:null,organizationSettingId:null,changeStatus:null,ids:[],classListId:null});X(()=>{v.query.id&&(e.organizationId=v.query.id,e.organizationSettingId=v.query.settingId,I(),h.dispatch("OrganizationStudent/getMyClasses",{settingId:v.query.settingId}))}),Y(()=>e.keyword,()=>{clearTimeout(e.typingTimer),e.typingTimer=setTimeout(()=>{e.limit=10,e.offset=0,e.currentPage=1,I()},e.typingDelay)});function N(d){const o=e.ids.findIndex(g=>g===d);o<0?e.ids.push(d):e.ids.splice(o,1)}const T=()=>{if(e.ids.length>0){const d=[];e.ids.forEach(o=>{d.push({id:o,card:!0})}),h.dispatch("OrganizationStudent/updateStudentCard",d)}else h.dispatch("Alert/error",{msg:"Please seclect student!"})},A=()=>{if(e.ids.length>0&&e.classListId){const d=[];e.ids.forEach(o=>{d.push({id:o,classListId:e.classListId})}),h.dispatch("OrganizationStudent/promoteClass",d)}else h.dispatch("Alert/error",{msg:"Please seclect student and class!"})};function I(){h.dispatch("OrganizationStudent/getStudentByClassDiv",{limit:e.limit,offset:e.offset,keyword:e.keyword,organizationDetailId:e.organizationId,classListId:v.query.classListId,classDivId:v.query.classDivId})}function P(d,o){e.changeStatus=o,e.studentId=d,a.value.statusModal=!0}function $(){h.dispatch("OrganizationStudent/updateStudentStatus",{id:e.studentId,status:e.changeStatus})}function k(d,o,g){E.push({path:g,query:{id:d,settingId:o}})}return(d,o)=>{var w;const g=i("icon-help"),q=i("icon-search"),m=i("icon-card"),x=i("icon-plus"),L=i("icon-asign"),b=i("router-link"),U=i("icon-edit"),B=i("icon-status"),f=i("icon-cross"),O=i("icon-success"),R=i("icon-warning"),H=i("icon-block"),S=i("Modal"),F=i("SingleSelectId");return l(),c("section",et,[t("div",nt,[t("div",at,[t("div",it,[t("div",dt,[t("div",lt,[t("div",ct,[n(g)]),rt])]),t("div",ut,[t("div",pt,[y(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>e.keyword=s),placeholder:"Search here"},null,512),[[Z,e.keyword]]),t("div",_t,[n(q)])]),t("div",ht,[t("div",{class:"icon tooltip-wrapper",onClick:o[1]||(o[1]=r(s=>a.value.cardModal=!0,["prevent"]))},[n(m),vt])]),t("div",gt,[t("div",{class:"icon tooltip-wrapper",onClick:o[2]||(o[2]=r(s=>k(e.organizationId,e.organizationSettingId,"/crm/school/create-my-student"),["prevent"]))},[n(x),mt])]),t("div",bt,[t("div",{class:"icon tooltip-wrapper",onClick:o[3]||(o[3]=r(s=>a.value.promoteModal=!0,["prevent"]))},[n(L),yt])])])]),t("div",ft,[t("div",St,[t("table",Ct,[It,t("tbody",null,[(l(!0),c(tt,null,st(a.value.studentData,(s,G)=>{var M,D,z;return l(),c("tr",{key:G},[t("td",null,[t("input",{type:"checkbox",onChange:V=>N(s.id)},null,40,kt)]),t("td",null,[s.card==0?(l(),c("span",wt,"Remaining")):p("",!0),s.card==1?(l(),c("span",Mt,"In Process")):p("",!0),s.card==2?(l(),c("span",Dt,"Printed")):p("",!0),s.card==3?(l(),c("span",zt,"RePrinted")):p("",!0)]),t("td",null,[s.profile?(l(),c("div",Vt,[t("img",{src:`${s.profile}?width=200`,alt:""},null,8,Et)])):p("",!0)]),t("td",null,_(s.srNo),1),t("td",Nt,[n(b,{to:{path:"/crm/school/student-profile",query:{studentId:s.id,id:e.organizationId,settingId:e.organizationSettingId}}},{default:u(()=>[ot(_(s.name),1)]),_:2},1032,["to"])]),t("td",null,_(s.fatherName),1),t("td",null,_((M=s.classList)==null?void 0:M.name)+"-"+_((D=s.classDiv)==null?void 0:D.name),1),t("td",null,_((z=s.organizationDetail)==null?void 0:z.name),1),t("td",null,[s.status==="ACTIVE"?(l(),c("div",Tt,_(s.status),1)):p("",!0),s.status==="PENDING"?(l(),c("div",At,_(s.status),1)):p("",!0),s.status==="DEACTIVE"?(l(),c("div",Pt,_(s.status),1)):p("",!0)]),t("td",null,[t("div",$t,[t("div",{class:"icon tooltip-wrapper",onClick:V=>k(s.id,e.organizationSettingId,"/crm/school/update-my-student")},[n(U),xt],8,qt),n(b,{class:"icon tooltip-wrapper",to:{path:"/crm/school/final-student-card",query:{id:s.id,status:"Class"}}},{default:u(()=>[n(m),Lt]),_:2},1032,["to"]),n(b,{class:"icon tooltip-wrapper",to:{path:"/crm/school/final-student-card",query:{id:s.id,status:"Parent"}}},{default:u(()=>[n(m),Ut]),_:2},1032,["to"]),n(b,{class:"icon tooltip-wrapper",to:{path:"/crm/school/final-student-card",query:{id:s.id,status:"House"}}},{default:u(()=>[n(m),Bt]),_:2},1032,["to"]),t("div",{class:"icon tooltip-wrapper",onClick:r(V=>P(s.id,s.status),["prevent"])},[n(B),Rt],8,Ot)])])])}),128))])])]),((w=a.value.studentData)==null?void 0:w.length)<=0?(l(),c("div",Ht,Gt)):p("",!0)])])]),n(S,{show:a.value.statusModal,"onUpdate:show":o[9]||(o[9]=s=>a.value.statusModal=s),class:"status-modal",headerClasses:"header-bg"},{header:u(()=>[jt,t("div",{class:"close-btn",onClick:o[4]||(o[4]=r(s=>a.value.statusModal=!1,["prevent"]))},[n(f)])]),default:u(()=>[t("div",Jt,[t("label",Kt,[y(t("input",{type:"radio","onUpdate:modelValue":o[5]||(o[5]=s=>e.changeStatus=s),value:"ACTIVE",id:"approve",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Qt,[n(O),Wt])]),t("label",Xt,[y(t("input",{type:"radio","onUpdate:modelValue":o[6]||(o[6]=s=>e.changeStatus=s),value:"PENDING",id:"pending",name:"status"},null,512),[[C,e.changeStatus]]),t("div",Yt,[n(R),Zt])]),t("label",ts,[y(t("input",{type:"radio","onUpdate:modelValue":o[7]||(o[7]=s=>e.changeStatus=s),value:"DEACTIVE",id:"block",name:"status"},null,512),[[C,e.changeStatus]]),t("div",ss,[n(H),os])])]),t("div",es,[t("div",ns,[t("div",{class:"btn red-btn",onClick:o[8]||(o[8]=r(s=>a.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:$},"Submit")])])]),_:1},8,["show"]),n(S,{show:a.value.cardModal,"onUpdate:show":o[12]||(o[12]=s=>a.value.cardModal=s),class:"status-modal",headerClasses:"header-bg"},{header:u(()=>[as,t("div",{class:"close-btn",onClick:o[10]||(o[10]=r(s=>a.value.cardModal=!1,["prevent"]))},[n(f)])]),default:u(()=>[t("div",is,[t("div",ds,[t("div",{class:"btn red-btn",type:"button",onClick:o[11]||(o[11]=r(s=>a.value.cardModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",type:"submit",onClick:r(T,["prevent"])}," Submit ")])])]),_:1},8,["show"]),n(S,{show:a.value.promoteModal,"onUpdate:show":o[16]||(o[16]=s=>a.value.promoteModal=s),class:"status-modal",headerClasses:"header-bg"},{header:u(()=>[ls,t("div",{class:"close-btn",onClick:o[13]||(o[13]=r(s=>a.value.promoteModal=!1,["prevent"]))},[n(f)])]),default:u(()=>[t("div",null,[n(F,{modelValue:e.classListId,"onUpdate:modelValue":o[14]||(o[14]=s=>e.classListId=s),options:a.value.classData},null,8,["modelValue","options"])]),t("div",cs,[t("div",rs,[t("div",{class:"btn red-btn",type:"button",onClick:o[15]||(o[15]=r(s=>a.value.promoteModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",type:"submit",onClick:r(A,["prevent"])}," Submit ")])])]),_:1},8,["show"])])}}};export{_s as default};
