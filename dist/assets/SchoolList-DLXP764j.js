import{u as X,s as Y,x as Z,d as tt,e as st,n as ot,D as et,r as n,o as l,c,a as t,b as a,w as v,v as nt,p as at,F as it,z as lt,f as _,g as b,i as ct,t as r,j as u,E as C}from"./index-DwPljJjs.js";const dt={class:"faq-page"},rt={class:"table-card card"},ut={class:"table-header"},_t={class:"left"},pt={class:"title-row"},ht={class:"icon"},vt=t("div",{class:"titles"},[t("div",{class:"sub-title"},"School : List"),t("h5",{class:"main-title"},"Our School")],-1),gt={class:"right"},mt={class:"searchbar"},ft={class:"icon"},yt={class:"searchbar"},bt={class:"select-dropdown"},Ct=t("option",{value:"ACTIVE"},"ACTIVE",-1),kt=t("option",{value:"PENDING"},"PENDING",-1),St=t("option",{value:"DEACTIVE"},"DEACTIVE",-1),It=[Ct,kt,St],wt={class:"table-body p-16"},Dt={class:"table-outer"},Et={class:"table"},Vt=t("thead",null,[t("th"),t("th",null,"Name"),t("th",null,"Contact No"),t("th",null,"Created By"),t("th",null,"State/City"),t("th",null,"Type"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1),Tt={key:0,class:"zoom-image"},Mt=["src"],Nt={key:0,class:"badge success-badge"},Pt={key:1,class:"badge warning-badge"},zt={key:2,class:"badge danger-badge"},At={class:"option-btns"},$t=["onClick"],xt=t("div",{class:"tooltip"},"Edit",-1),Ot=["onClick"],Ut=t("div",{class:"tooltip"},"Change Status",-1),Bt=["onClick"],Lt=t("div",{class:"tooltip"},"My Branch",-1),qt=["onClick"],Gt=t("div",{class:"tooltip"},"Library",-1),Ft=["onClick"],Rt=t("div",{class:"tooltip"},"My Staff",-1),Ht=["onClick"],jt=t("div",{class:"tooltip"},"My Student",-1),Jt=["onClick"],Kt=t("div",{class:"tooltip"},"Setttngs",-1),Qt={key:0,class:"table-no-data"},Wt=t("div",null,"No records Found!",-1),Xt=[Wt],Yt={key:1,class:"table-footer"},Zt=t("div",{class:"title",showHeader:"true"},"Change Status",-1),ts={class:"status-row"},ss={for:"approve",class:"data"},os={class:"data-inner approve-card"},es=t("div",{class:"title"},"ACTIVE",-1),ns={for:"pending",class:"data"},as={class:"data-inner pending-card"},is=t("div",{class:"title"},"PENDING",-1),ls={for:"block",class:"data"},cs={class:"data-inner block-card"},ds=t("div",{class:"title"},"DEACTIVE",-1),rs={class:"modal-footer"},us={class:"btns"},ps={__name:"SchoolList",props:{fromDate:{type:String,default:!0},toDate:{type:String,required:!0},all:{type:String,required:!0}},setup(T){const m=T,f=X();Y();const k=Z(),i=tt(()=>f.state.Dashboard),o=st({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",roles:"SCHOOL",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,organizationAccountId:null,changeStatus:null});ot(()=>{g()}),et(()=>o.keyword,()=>{clearTimeout(o.typingTimer),o.typingTimer=setTimeout(()=>{o.limit=10,o.offset=0,o.currentPage=1,g()},o.typingDelay)});function g(){f.dispatch("Dashboard/getOrganization",{limit:o.limit,offset:o.offset,keyword:o.keyword,status:o.status,roles:o.roles,fromDate:m.fromDate,toDate:m.toDate,all:m.all})}function M(d,e){o.changeStatus=e,o.organizationId=d,i.value.statusModal=!0}function N(){f.dispatch("Organization/updateOrganizationStatus",{id:o.organizationId,status:o.changeStatus}),i.value.statusModal=!1}const P=d=>{o.currentPage=d,o.offset=o.limit*(d-1),g()};function z(){g()}function A(d,e){k.push({path:e,query:{id:d}})}function h(d,e,y){k.push({path:y,query:{id:d,settingId:e}})}return(d,e)=>{var S,I;const y=n("icon-school"),$=n("icon-search"),x=n("router-link"),O=n("icon-edit"),U=n("icon-status"),B=n("icon-menu"),L=n("icon-library-list"),q=n("icon-user-list"),G=n("icon-student-list"),F=n("icon-setting"),R=n("Pagination"),H=n("icon-cross"),j=n("icon-success"),J=n("icon-warning"),K=n("icon-block"),Q=n("Modal");return l(),c("section",dt,[t("div",rt,[t("div",ut,[t("div",_t,[t("div",pt,[t("div",ht,[a(y)]),vt])]),t("div",gt,[t("div",mt,[v(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>o.keyword=s),placeholder:"Search here"},null,512),[[nt,o.keyword]]),t("div",ft,[a($)])]),t("div",yt,[t("div",bt,[v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.status=s),onChange:z},It,544),[[at,o.status]])])])])]),t("div",wt,[t("div",Dt,[t("table",Et,[Vt,t("tbody",null,[(l(!0),c(it,null,lt(i.value.organizationData,(s,W)=>{var w,D,E,V;return l(),c("tr",{key:W},[t("td",null,[s.image?(l(),c("div",Tt,[t("img",{src:`${s.image}?width=200`,alt:""},null,8,Mt)])):_("",!0)]),t("td",null,[a(x,{to:`/crm/school/setting/class-list?id=${s.id}&settingId=${s.settingId}`,class:"profile-link hover-color"},{default:b(()=>[ct(r(s.name),1)]),_:2},1032,["to"])]),t("td",null,r(s.contactNo),1),t("td",null,r(((D=(w=s.updated)==null?void 0:w.staffDetail)==null?void 0:D.name)||((V=(E=s.updated)==null?void 0:E.partnerDetail[0])==null?void 0:V.firmName)),1),t("td",null,r(s.state)+"/"+r(s.city),1),t("td",null,r(s.type),1),t("td",null,[s.status==="ACTIVE"?(l(),c("div",Nt,r(s.status),1)):_("",!0),s.status==="PENDING"?(l(),c("div",Pt,r(s.status),1)):_("",!0),s.status==="DEACTIVE"?(l(),c("div",zt,r(s.status),1)):_("",!0)]),t("td",null,[t("div",At,[t("div",{class:"icon tooltip-wrapper",onClick:p=>A(s.id,"/crm/edit-school")},[a(O),xt],8,$t),t("div",{class:"icon tooltip-wrapper",onClick:u(p=>M(s.id,s.status),["prevent"])},[a(U),Ut],8,Ot),s.setting.type==="MULTI"?(l(),c("div",{key:0,class:"icon tooltip-wrapper",onClick:u(p=>h(s.accountId,s.settingId,"/crm/school/my-branch"),["prevent"])},[a(B),Lt],8,Bt)):_("",!0),t("div",{class:"icon tooltip-wrapper",onClick:u(p=>h(s.id,s.settingId,"/crm/school/library"),["prevent"])},[a(L),Gt],8,qt),t("div",{class:"icon tooltip-wrapper",onClick:u(p=>h(s.id,s.settingId,"/crm/organization/my-staff"),["prevent"])},[a(q),Rt],8,Ft),t("div",{class:"icon tooltip-wrapper",onClick:u(p=>h(s.id,s.settingId,"/crm/school/my-student"),["prevent"])},[a(G),jt],8,Ht),t("div",{class:"icon tooltip-wrapper",onClick:u(p=>h(s.id,s.settingId,"/crm/school/setting/class-list"),["prevent"])},[a(F),Kt],8,Jt)])])])}),128))])])]),((S=i.value.organizationData)==null?void 0:S.length)<=0?(l(),c("div",Qt,Xt)):_("",!0),((I=i.value.organizationData)==null?void 0:I.length)>0?(l(),c("div",Yt,[a(R,{currentPage:o.currentPage,totalItem:i.value.totalOrganization,itemsPerPage:o.limit,"onUpdate:currentPage":e[2]||(e[2]=s=>P(s))},null,8,["currentPage","totalItem","itemsPerPage"])])):_("",!0)])]),a(Q,{show:i.value.statusModal,"onUpdate:show":e[8]||(e[8]=s=>i.value.statusModal=s),class:"status-modal",headerClasses:"header-bg"},{header:b(()=>[Zt,t("div",{class:"close-btn",onClick:e[3]||(e[3]=u(s=>i.value.statusModal=!1,["prevent"]))},[a(H)])]),default:b(()=>[t("div",ts,[t("label",ss,[v(t("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=s=>o.changeStatus=s),value:"ACTIVE",id:"approve",name:"status"},null,512),[[C,o.changeStatus]]),t("div",os,[a(j),es])]),t("label",ns,[v(t("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=s=>o.changeStatus=s),value:"PENDING",id:"pending",name:"status"},null,512),[[C,o.changeStatus]]),t("div",as,[a(J),is])]),t("label",ls,[v(t("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=s=>o.changeStatus=s),value:"DEACTIVE",id:"block",name:"status"},null,512),[[C,o.changeStatus]]),t("div",cs,[a(K),ds])])]),t("div",rs,[t("div",us,[t("div",{class:"btn red-btn",onClick:e[7]||(e[7]=u(s=>i.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:N},"Submit")])])]),_:1},8,["show"])])}}};export{ps as default};
