import{u as C,s as V,x as I,d as w,e as E,n as U,r as j,o as d,c as r,a as s,b as B,t as _,w as h,A as v,F as b,z as S,h as N}from"./index-DwPljJjs.js";const q={class:"faq-page"},D={class:"container"},O={class:"table-card card"},R={class:"table-header"},F={class:"left"},M={class:"title-row"},$={class:"icon"},z={class:"titles"},L=s("div",{class:"sub-title"},"Admin : Permission",-1),T={class:"main-title"},G={class:"right"},H=s("div",{class:"searchbar"},[s("span",null,"All")],-1),J={class:"searchbar"},K={class:"toggle-input"},Q={class:"toggle-control"},W=s("span",{class:"control"},null,-1),X={class:"table-body p-16"},Y={class:"permission-page user-profile"},Z=N('<div class="title text-primary top-header"><div class="title">Permission</div><div class="title">All</div><div class="title">Create</div><div class="title">Read</div><div class="title">Update</div><div class="title">Delete</div></div>',1),ss={class:"left-title"},ts={class:"title"},es={class:"right-permissions"},as={class:"input-row"},os={class:"toggle-input"},is=s("p",null,"All",-1),ls={class:"toggle-control"},ns=["onUpdate:modelValue","onChange"],cs=s("span",{class:"control"},null,-1),ds={class:"toggle-input"},rs={class:"toggle-control"},us=["onUpdate:modelValue","onChange"],_s=s("span",{class:"control"},null,-1),ps={__name:"AdminPermission",setup(hs){const u=C(),p=V();I();const a=w(()=>u.state.Staff),n=E({staffId:null,staffAccountId:null,allStatus:!1,all:!1});U(()=>{p.query.id&&(n.staffAccountId=p.query.id,P())});function P(){u.dispatch("Staff/getOneStaff",{id:n.staffAccountId})}function f(){u.dispatch("Staff/updatePermission",{menu:a.value.permissiondata})}function y(o,e){const i=a.value.permissiondata.findIndex(t=>t.id===o);i>=0&&a.value.permissiondata[i].userPermission.forEach(c=>{c.status=e})}function k(o){const e=a.value.permissiondata.findIndex(i=>i.id===o);if(e>=0){const t=a.value.permissiondata[e].userPermission.every(c=>c.status===!0);a.value.permissiondata[e].allStatus=t}}function x(){n.all?a.value.permissiondata.forEach(o=>{o.allStatus=!0,o.userPermission.forEach(e=>{e.status=!0})}):a.value.permissiondata.forEach(o=>{o.allStatus=!1,o.userPermission.forEach(e=>{e.status=!1})})}return(o,e)=>{const i=j("icon-permission");return d(),r("section",q,[s("div",D,[s("div",O,[s("div",R,[s("div",F,[s("div",M,[s("div",$,[B(i)]),s("div",z,[L,s("h5",T,_(a.value.name),1)])])]),s("div",G,[H,s("div",J,[s("div",K,[s("label",Q,[h(s("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=t=>n.all=t),onChange:x},null,544),[[v,n.all]]),W])])]),s("div",{class:"btns justify-end"},[s("div",{class:"btn white-btn",onClick:f}," Save Changes ")])])]),s("div",X,[s("section",Y,[Z,(d(!0),r(b,null,S(a.value.permissiondata,(t,c)=>(d(),r("div",{class:"per-table",key:c},[s("div",ss,[s("div",ts,_(t.title),1)]),s("div",es,[s("div",as,[s("div",os,[is,s("label",ls,[h(s("input",{type:"checkbox","onUpdate:modelValue":l=>t.allStatus=l,onChange:l=>y(t.id,t.allStatus)},null,40,ns),[[v,t.allStatus]]),cs])])]),(d(!0),r(b,null,S(t.userPermission,(l,A)=>{var m;return d(),r("div",{class:"input-row",key:A},[s("div",ds,[s("p",null,_((m=l.permission)==null?void 0:m.name),1),s("label",rs,[h(s("input",{type:"checkbox","onUpdate:modelValue":g=>l.status=g,onChange:g=>k(t.id)},null,40,us),[[v,l.status]]),_s])])])}),128))])]))),128))]),s("div",{class:"btns justify-end mt-10"},[s("div",{class:"btn white-btn",onClick:f},"Save Changes")])])])])])}}};export{ps as default};
