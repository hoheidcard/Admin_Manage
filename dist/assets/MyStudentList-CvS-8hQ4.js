import{u as O,s as j,x as J,d as K,e as Q,n as W,D as X,r as a,o as d,c as l,a as t,b as n,w as h,v as Y,g as u,j as g,F as Z,z as tt,f as _,t as c,i as st,E as b}from"./index-DwPljJjs.js";const ot={class:"faq-page"},et={class:"container"},nt={class:"table-card card"},at={class:"table-header"},it={class:"left"},dt={class:"title-row"},lt={class:"icon"},ct=t("div",{class:"titles"},[t("div",{class:"sub-title"},"Student : List"),t("h5",{class:"main-title"},"Student")],-1),rt={class:"right"},ut={class:"searchbar"},_t={class:"icon"},pt={class:"icons"},ht=t("div",{class:"tooltip"},"Import List",-1),gt={class:"icons"},vt=t("div",{class:"tooltip"},"Add Student",-1),mt={class:"table-body p-16"},ft={class:"table-outer"},St={class:"table"},yt=t("thead",null,[t("th",null,"Image"),t("th",null,"SR No."),t("th",null,"S. Name"),t("th",null,"F. Name"),t("th",null,"Class-Section"),t("th",null,"School"),t("th",null,"Status"),t("th",{class:"text-center"},"Action")],-1),bt={key:0,class:"zoom-image"},It=["src"],wt={class:"text-primary"},kt={key:0,class:"badge success-badge"},Ct={key:1,class:"badge warning-badge"},zt={key:2,class:"badge danger-badge"},Pt={class:"option-btns"},Dt=["onClick"],Vt=t("div",{class:"tooltip"},"Edit",-1),Et=t("div",{class:"tooltip"},"Student",-1),Nt=t("div",{class:"tooltip"},"Parent",-1),Mt=t("div",{class:"tooltip"},"House",-1),Tt=["onClick"],qt=t("div",{class:"tooltip"},"Change Status",-1),xt={key:0,class:"table-no-data"},At=t("div",null,"No records Found!",-1),Ut=[At],$t={key:1,class:"table-footer"},Lt=t("div",{class:"title",showHeader:"true"},"Change Status",-1),Bt={class:"status-row"},Ft={for:"approve",class:"data"},Rt={class:"data-inner approve-card"},Gt=t("div",{class:"title"},"ACTIVE",-1),Ht={for:"pending",class:"data"},Ot={class:"data-inner pending-card"},jt=t("div",{class:"title"},"PENDING",-1),Jt={for:"block",class:"data"},Kt={class:"data-inner block-card"},Qt=t("div",{class:"title"},"DEACTIVE",-1),Wt={class:"modal-footer"},Xt={class:"btns"},ts={__name:"MyStudentList",setup(Yt){const v=O(),m=j(),D=J(),i=K(()=>v.state.OrganizationStudent),s=Q({submit:!1,limit:10,offset:0,keyword:"",status:"ACTIVE",currentPage:1,editMode:!1,typingTimer:null,typingDelay:500,organizationId:null,studentId:null,organizationSettingId:null,changeStatus:null});W(()=>{m.query.id&&(s.organizationId=m.query.id,s.organizationSettingId=m.query.settingId,f())}),X(()=>s.keyword,()=>{clearTimeout(s.typingTimer),s.typingTimer=setTimeout(()=>{s.limit=10,s.offset=0,s.currentPage=1,f()},s.typingDelay)});function f(){v.dispatch("OrganizationStudent/getStudent",{limit:s.limit,offset:s.offset,keyword:s.keyword,organizationDetailId:s.organizationId})}function V(r,e){s.changeStatus=e,s.studentId=r,i.value.statusModal=!0}function E(){v.dispatch("OrganizationStudent/updateStudentStatus",{id:s.studentId,status:s.changeStatus})}const N=r=>{s.currentPage=r,s.offset=s.limit*(r-1),f()};function I(r,e,S){D.push({path:S,query:{id:r,settingId:e}})}return(r,e)=>{var w,k;const S=a("icon-help"),M=a("icon-search"),T=a("icon-download"),p=a("router-link"),q=a("icon-plus"),x=a("icon-edit"),y=a("icon-card"),A=a("icon-status"),U=a("Pagination"),$=a("icon-cross"),L=a("icon-success"),B=a("icon-warning"),F=a("icon-block"),R=a("Modal");return d(),l("section",ot,[t("div",et,[t("div",nt,[t("div",at,[t("div",it,[t("div",dt,[t("div",lt,[n(S)]),ct])]),t("div",rt,[t("div",ut,[h(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>s.keyword=o),placeholder:"Search here"},null,512),[[Y,s.keyword]]),t("div",_t,[n(M)])]),t("div",pt,[n(p,{to:"/crm/school/import-student?id="+s.organizationId+"&settingId="+s.organizationSettingId,class:"icon tooltip-wrapper"},{default:u(()=>[n(T,{class:""}),ht]),_:1},8,["to"])]),t("div",gt,[t("div",{class:"icon tooltip-wrapper",onClick:e[1]||(e[1]=g(o=>I(s.organizationId,s.organizationSettingId,"/crm/school/create-my-student"),["prevent"]))},[n(q),vt])])])]),t("div",mt,[t("div",ft,[t("table",St,[yt,t("tbody",null,[(d(!0),l(Z,null,tt(i.value.studentData,(o,G)=>{var C,z,P;return d(),l("tr",{key:G},[t("td",null,[o.profile?(d(),l("div",bt,[t("img",{src:`${o.profile}?width=200`,alt:""},null,8,It)])):_("",!0)]),t("td",null,c(o.srNo),1),t("td",wt,[n(p,{to:{path:"/crm/school/student-profile",query:{studentId:o.id,id:s.organizationId,settingId:s.organizationSettingId}}},{default:u(()=>[st(c(o.name),1)]),_:2},1032,["to"])]),t("td",null,c(o.fatherName),1),t("td",null,c((C=o.classList)==null?void 0:C.name)+"-"+c((z=o.classDiv)==null?void 0:z.name),1),t("td",null,c((P=o.organizationDetail)==null?void 0:P.name),1),t("td",null,[o.status==="ACTIVE"?(d(),l("div",kt,c(o.status),1)):_("",!0),o.status==="PENDING"?(d(),l("div",Ct,c(o.status),1)):_("",!0),o.status==="DEACTIVE"?(d(),l("div",zt,c(o.status),1)):_("",!0)]),t("td",null,[t("div",Pt,[t("div",{class:"icon tooltip-wrapper",onClick:H=>I(o.id,s.organizationSettingId,"/crm/school/update-my-student")},[n(x),Vt],8,Dt),n(p,{class:"icon tooltip-wrapper",to:{path:"/crm/school/final-student-card",query:{id:o.id,status:"Class"}}},{default:u(()=>[n(y),Et]),_:2},1032,["to"]),n(p,{class:"icon tooltip-wrapper",to:{path:"/crm/school/final-student-card",query:{id:o.id,status:"Parent"}}},{default:u(()=>[n(y),Nt]),_:2},1032,["to"]),n(p,{class:"icon tooltip-wrapper",to:{path:"/crm/school/final-student-card",query:{id:o.id,status:"House"}}},{default:u(()=>[n(y),Mt]),_:2},1032,["to"]),t("div",{class:"icon tooltip-wrapper",onClick:g(H=>V(o.id,o.status),["prevent"])},[n(A),qt],8,Tt)])])])}),128))])])]),((w=i.value.studentData)==null?void 0:w.length)<=0?(d(),l("div",xt,Ut)):_("",!0),((k=i.value.studentData)==null?void 0:k.length)>0?(d(),l("div",$t,[n(U,{currentPage:s.currentPage,totalItem:i.value.totalStudent,itemsPerPage:s.limit,"onUpdate:currentPage":e[2]||(e[2]=o=>N(o))},null,8,["currentPage","totalItem","itemsPerPage"])])):_("",!0)])])]),n(R,{show:i.value.statusModal,"onUpdate:show":e[8]||(e[8]=o=>i.value.statusModal=o),class:"status-modal",headerClasses:"header-bg"},{header:u(()=>[Lt,t("div",{class:"close-btn",onClick:e[3]||(e[3]=g(o=>i.value.statusModal=!1,["prevent"]))},[n($)])]),default:u(()=>[t("div",Bt,[t("label",Ft,[h(t("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=o=>s.changeStatus=o),value:"ACTIVE",id:"approve",name:"status"},null,512),[[b,s.changeStatus]]),t("div",Rt,[n(L),Gt])]),t("label",Ht,[h(t("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=o=>s.changeStatus=o),value:"PENDING",id:"pending",name:"status"},null,512),[[b,s.changeStatus]]),t("div",Ot,[n(B),jt])]),t("label",Jt,[h(t("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=o=>s.changeStatus=o),value:"DEACTIVE",id:"block",name:"status"},null,512),[[b,s.changeStatus]]),t("div",Kt,[n(F),Qt])])]),t("div",Wt,[t("div",Xt,[t("div",{class:"btn red-btn",onClick:e[7]||(e[7]=g(o=>i.value.statusModal=!1,["prevent"]))}," Cancel "),t("div",{class:"btn white-btn",onClick:E},"Submit")])])]),_:1},8,["show"])])}}};export{ts as default};
